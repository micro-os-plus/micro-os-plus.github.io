<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>µOS++ IIIe Reference: os::rtos::message_queue Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-16767008-14', 'auto');
  ga('send', 'pageview');
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="$relpath/../../../.."><img alt="Logo" src="logo.png"/></a></td>
  <td id="projectalign">
   <div>
     <div id="projectname">µOS++ IIIe Reference
     &#160;<span id="projectnumber">v6.3.15</span>
     </div>
     <div id="projectmotto" class="float:right;">“Perfekt ist nicht gut genug”</div>
     </div>  
   </div>
   <div id="projectbrief">The third edition of µOS++, a POSIX inspired open source system, written in C++.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classos_1_1rtos_1_1message__queue.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classos_1_1rtos_1_1message__queue-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">os::rtos::message_queue Class Reference<div class="ingroups"><a class="el" href="group__cmsis-plus-rtos.html">µOS++ RTOS C++ API</a> &raquo; <a class="el" href="group__cmsis-plus-rtos-mqueue.html">Message queues</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>POSIX compliant <b>message queue</b>, using the default RTOS allocator.  
 <a href="classos_1_1rtos_1_1message__queue.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="os_8h_source.html">cmsis-plus/rtos/os.h</a>&gt;</code></p>

<p>Inherits <a class="el" href="classos_1_1rtos_1_1internal_1_1object__named__system.html">os::rtos::internal::object_named_system</a>.</p>

<p>Inherited by <a class="el" href="classos_1_1rtos_1_1message__queue__allocated.html">os::rtos::message_queue_allocated&lt; Allocator &gt;</a>, and <a class="el" href="classos_1_1rtos_1_1message__queue__inclusive.html">os::rtos::message_queue_inclusive&lt; T, N &gt;</a>.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1message__queue_1_1arena.html">arena</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Storage for a static message queue.  <a href="classos_1_1rtos_1_1message__queue_1_1arena.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1message__queue_1_1attributes.html">attributes</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Message queue attributes.  <a href="classos_1_1rtos_1_1message__queue_1_1attributes.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ga99e8ba430c6176765669424acded3f0e"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga99e8ba430c6176765669424acded3f0e">allocator_type</a> = <a class="el" href="group__cmsis-plus-rtos-memres.html#gac00e47b1a65850b96de7c9fe0e938da1">memory::allocator</a>&lt; <a class="el" href="classos_1_1rtos_1_1thread_1_1stack.html#ab4cbbaaaf2f0a91dcc9a7cc42b7f8b98">thread::stack::allocation_element_t</a> &gt;</td></tr>
<tr class="memdesc:ga99e8ba430c6176765669424acded3f0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default RTOS allocator.  <a href="group__cmsis-plus-rtos-mqueue.html#ga99e8ba430c6176765669424acded3f0e">More...</a><br /></td></tr>
<tr class="separator:ga99e8ba430c6176765669424acded3f0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2983d5ecc043f3be220ae96619bfa148"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga2983d5ecc043f3be220ae96619bfa148">index_t</a> = <a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga733ed9282c7d8df162a7863851426789">message_queue::size_t</a></td></tr>
<tr class="memdesc:ga2983d5ecc043f3be220ae96619bfa148"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of list index storage.  <a href="group__cmsis-plus-rtos-mqueue.html#ga2983d5ecc043f3be220ae96619bfa148">More...</a><br /></td></tr>
<tr class="separator:ga2983d5ecc043f3be220ae96619bfa148"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaee507fd1f777940280b9246bff1018d3"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmsis-plus-rtos-mqueue.html#gaee507fd1f777940280b9246bff1018d3">msg_size_t</a> = uint16_t</td></tr>
<tr class="memdesc:gaee507fd1f777940280b9246bff1018d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of message size storage.  <a href="group__cmsis-plus-rtos-mqueue.html#gaee507fd1f777940280b9246bff1018d3">More...</a><br /></td></tr>
<tr class="separator:gaee507fd1f777940280b9246bff1018d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga26895a3c081fd319cb199d21c4028963"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga26895a3c081fd319cb199d21c4028963">priority_t</a> = uint8_t</td></tr>
<tr class="memdesc:ga26895a3c081fd319cb199d21c4028963"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of message priority storage.  <a href="group__cmsis-plus-rtos-mqueue.html#ga26895a3c081fd319cb199d21c4028963">More...</a><br /></td></tr>
<tr class="separator:ga26895a3c081fd319cb199d21c4028963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga733ed9282c7d8df162a7863851426789"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga733ed9282c7d8df162a7863851426789">size_t</a> = uint8_t</td></tr>
<tr class="memdesc:ga733ed9282c7d8df162a7863851426789"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of a queue size storage.  <a href="group__cmsis-plus-rtos-mqueue.html#ga733ed9282c7d8df162a7863851426789">More...</a><br /></td></tr>
<tr class="separator:ga733ed9282c7d8df162a7863851426789"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a927870645dd32ddabdf2a701bfa4cdaa"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a927870645dd32ddabdf2a701bfa4cdaa"><td class="memTemplItemLeft" align="right" valign="top">constexpr std::size_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1message__queue.html#a927870645dd32ddabdf2a701bfa4cdaa">compute_allocated_size_bytes</a> (std::size_t msgs, std::size_t msg_size_bytes)</td></tr>
<tr class="memdesc:a927870645dd32ddabdf2a701bfa4cdaa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculator for queue storage requirements.  <a href="#a927870645dd32ddabdf2a701bfa4cdaa">More...</a><br /></td></tr>
<tr class="separator:a927870645dd32ddabdf2a701bfa4cdaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Constructors &amp; Destructor</div></td></tr>
<tr class="memitem:abdffbae1fad40d43c075210034f2eab4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1message__queue.html#abdffbae1fad40d43c075210034f2eab4">message_queue</a> (std::size_t msgs, std::size_t msg_size_bytes, const <a class="el" href="classos_1_1rtos_1_1message__queue_1_1attributes.html">attributes</a> &amp;attr=<a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga56b50be700d2a0af4b41457bc44be8ee">initializer</a>, const <a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga99e8ba430c6176765669424acded3f0e">allocator_type</a> &amp;allocator=<a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga99e8ba430c6176765669424acded3f0e">allocator_type</a>())</td></tr>
<tr class="memdesc:abdffbae1fad40d43c075210034f2eab4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a message queue object instance.  <a href="#abdffbae1fad40d43c075210034f2eab4">More...</a><br /></td></tr>
<tr class="separator:abdffbae1fad40d43c075210034f2eab4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea0cb2073877631502157dda881ca7a3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1message__queue.html#aea0cb2073877631502157dda881ca7a3">message_queue</a> (const char *<a class="el" href="classos_1_1rtos_1_1internal_1_1object__named.html#a36805a0eae21688c136129059482c3dd">name</a>, std::size_t msgs, std::size_t msg_size_bytes, const <a class="el" href="classos_1_1rtos_1_1message__queue_1_1attributes.html">attributes</a> &amp;attr=<a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga56b50be700d2a0af4b41457bc44be8ee">initializer</a>, const <a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga99e8ba430c6176765669424acded3f0e">allocator_type</a> &amp;allocator=<a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga99e8ba430c6176765669424acded3f0e">allocator_type</a>())</td></tr>
<tr class="memdesc:aea0cb2073877631502157dda881ca7a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a named message queue object instance.  <a href="#aea0cb2073877631502157dda881ca7a3">More...</a><br /></td></tr>
<tr class="separator:aea0cb2073877631502157dda881ca7a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cef7d6e988dffa5439071661cc9bcb8"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1message__queue.html#a5cef7d6e988dffa5439071661cc9bcb8">~message_queue</a> ()</td></tr>
<tr class="memdesc:a5cef7d6e988dffa5439071661cc9bcb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destruct the message queue object instance.  <a href="#a5cef7d6e988dffa5439071661cc9bcb8">More...</a><br /></td></tr>
<tr class="separator:a5cef7d6e988dffa5439071661cc9bcb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Operators</div></td></tr>
<tr class="memitem:a07e2f118b21e0e352440525117afbdc3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1message__queue.html#a07e2f118b21e0e352440525117afbdc3">operator==</a> (const <a class="el" href="classos_1_1rtos_1_1message__queue.html">message_queue</a> &amp;rhs) const </td></tr>
<tr class="memdesc:a07e2f118b21e0e352440525117afbdc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare memory queues.  <a href="#a07e2f118b21e0e352440525117afbdc3">More...</a><br /></td></tr>
<tr class="separator:a07e2f118b21e0e352440525117afbdc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Public Member Functions</div></td></tr>
<tr class="memitem:a3e6feb26468955f0eef1251a94f04091"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1message__queue.html#a3e6feb26468955f0eef1251a94f04091">send</a> (const void *msg, std::size_t nbytes, <a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga26895a3c081fd319cb199d21c4028963">priority_t</a> mprio=<a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga40cf8256124467cd9c58410969808979">default_priority</a>)</td></tr>
<tr class="memdesc:a3e6feb26468955f0eef1251a94f04091"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message to the queue.  <a href="#a3e6feb26468955f0eef1251a94f04091">More...</a><br /></td></tr>
<tr class="separator:a3e6feb26468955f0eef1251a94f04091"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19cb3d7014f09cc497a953e9052b7b57"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1message__queue.html#a19cb3d7014f09cc497a953e9052b7b57">try_send</a> (const void *msg, std::size_t nbytes, <a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga26895a3c081fd319cb199d21c4028963">priority_t</a> mprio=<a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga40cf8256124467cd9c58410969808979">default_priority</a>)</td></tr>
<tr class="memdesc:a19cb3d7014f09cc497a953e9052b7b57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to send a message to the queue.  <a href="#a19cb3d7014f09cc497a953e9052b7b57">More...</a><br /></td></tr>
<tr class="separator:a19cb3d7014f09cc497a953e9052b7b57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bea78cd3cc3a5b6111f841bb049e668"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1message__queue.html#a8bea78cd3cc3a5b6111f841bb049e668">timed_send</a> (const void *msg, std::size_t nbytes, <a class="el" href="group__cmsis-plus-rtos-clock.html#ga149d8b5cea55224ef5cfede8a81df04c">clock::duration_t</a> timeout, <a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga26895a3c081fd319cb199d21c4028963">priority_t</a> mprio=<a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga40cf8256124467cd9c58410969808979">default_priority</a>)</td></tr>
<tr class="memdesc:a8bea78cd3cc3a5b6111f841bb049e668"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a message to the queue with timeout.  <a href="#a8bea78cd3cc3a5b6111f841bb049e668">More...</a><br /></td></tr>
<tr class="separator:a8bea78cd3cc3a5b6111f841bb049e668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a1a56c91c116aeedcc0a6da9f09ee7d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1message__queue.html#a0a1a56c91c116aeedcc0a6da9f09ee7d">receive</a> (void *msg, std::size_t nbytes, <a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga26895a3c081fd319cb199d21c4028963">priority_t</a> *mprio=nullptr)</td></tr>
<tr class="memdesc:a0a1a56c91c116aeedcc0a6da9f09ee7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive a message from the queue.  <a href="#a0a1a56c91c116aeedcc0a6da9f09ee7d">More...</a><br /></td></tr>
<tr class="separator:a0a1a56c91c116aeedcc0a6da9f09ee7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22bd67fcd9fce69ba35179d0c9be10fe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1message__queue.html#a22bd67fcd9fce69ba35179d0c9be10fe">try_receive</a> (void *msg, std::size_t nbytes, <a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga26895a3c081fd319cb199d21c4028963">priority_t</a> *mprio=nullptr)</td></tr>
<tr class="memdesc:a22bd67fcd9fce69ba35179d0c9be10fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to receive a message from the queue.  <a href="#a22bd67fcd9fce69ba35179d0c9be10fe">More...</a><br /></td></tr>
<tr class="separator:a22bd67fcd9fce69ba35179d0c9be10fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a86c028b46b689fbc50a035639200ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1message__queue.html#a6a86c028b46b689fbc50a035639200ba">timed_receive</a> (void *msg, std::size_t nbytes, <a class="el" href="group__cmsis-plus-rtos-clock.html#ga149d8b5cea55224ef5cfede8a81df04c">clock::duration_t</a> timeout, <a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga26895a3c081fd319cb199d21c4028963">priority_t</a> *mprio=nullptr)</td></tr>
<tr class="memdesc:a6a86c028b46b689fbc50a035639200ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive a message from the queue with timeout.  <a href="#a6a86c028b46b689fbc50a035639200ba">More...</a><br /></td></tr>
<tr class="separator:a6a86c028b46b689fbc50a035639200ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4ee2f72a8b72a663b16f8fa0e0dc244"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1message__queue.html#ae4ee2f72a8b72a663b16f8fa0e0dc244">capacity</a> (void) const </td></tr>
<tr class="memdesc:ae4ee2f72a8b72a663b16f8fa0e0dc244"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get queue capacity.  <a href="#ae4ee2f72a8b72a663b16f8fa0e0dc244">More...</a><br /></td></tr>
<tr class="separator:ae4ee2f72a8b72a663b16f8fa0e0dc244"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff78d42a19d99e3fde893970fc6b08cd"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1message__queue.html#aff78d42a19d99e3fde893970fc6b08cd">length</a> (void) const </td></tr>
<tr class="memdesc:aff78d42a19d99e3fde893970fc6b08cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get queue length.  <a href="#aff78d42a19d99e3fde893970fc6b08cd">More...</a><br /></td></tr>
<tr class="separator:aff78d42a19d99e3fde893970fc6b08cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a377039a7f208bbc1c85ed53ac753c360"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1message__queue.html#a377039a7f208bbc1c85ed53ac753c360">msg_size</a> (void) const </td></tr>
<tr class="memdesc:a377039a7f208bbc1c85ed53ac753c360"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get message size.  <a href="#a377039a7f208bbc1c85ed53ac753c360">More...</a><br /></td></tr>
<tr class="separator:a377039a7f208bbc1c85ed53ac753c360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5f62d011ae11c87de47ebb528b17432"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1message__queue.html#ae5f62d011ae11c87de47ebb528b17432">empty</a> (void) const </td></tr>
<tr class="memdesc:ae5f62d011ae11c87de47ebb528b17432"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the queue is empty.  <a href="#ae5f62d011ae11c87de47ebb528b17432">More...</a><br /></td></tr>
<tr class="separator:ae5f62d011ae11c87de47ebb528b17432"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6106138213cbf09c034242aa6a32509e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1message__queue.html#a6106138213cbf09c034242aa6a32509e">full</a> (void) const </td></tr>
<tr class="memdesc:a6106138213cbf09c034242aa6a32509e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the queue is full.  <a href="#a6106138213cbf09c034242aa6a32509e">More...</a><br /></td></tr>
<tr class="separator:a6106138213cbf09c034242aa6a32509e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e1d0aff24922dc2dccc4f150f65e78c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1message__queue.html#a0e1d0aff24922dc2dccc4f150f65e78c">reset</a> (void)</td></tr>
<tr class="memdesc:a0e1d0aff24922dc2dccc4f150f65e78c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the message queue.  <a href="#a0e1d0aff24922dc2dccc4f150f65e78c">More...</a><br /></td></tr>
<tr class="separator:a0e1d0aff24922dc2dccc4f150f65e78c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Public Member Functions</div></td></tr>
<tr class="memitem:a36805a0eae21688c136129059482c3dd"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1internal_1_1object__named.html#a36805a0eae21688c136129059482c3dd">name</a> (void) const </td></tr>
<tr class="memdesc:a36805a0eae21688c136129059482c3dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get object name.  <a href="#a36805a0eae21688c136129059482c3dd">More...</a><br /></td></tr>
<tr class="separator:a36805a0eae21688c136129059482c3dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Operators</div></td></tr>
<tr class="memitem:a1456983acc3a56e02cd4a48a220f222c"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1internal_1_1object__named__system.html#a1456983acc3a56e02cd4a48a220f222c">operator new</a> (std::size_t bytes)</td></tr>
<tr class="memdesc:a1456983acc3a56e02cd4a48a220f222c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate space for a new object instance using the RTOS system allocator.  <a href="#a1456983acc3a56e02cd4a48a220f222c">More...</a><br /></td></tr>
<tr class="separator:a1456983acc3a56e02cd4a48a220f222c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35f709b685919d096e49acb8edefe02f"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1internal_1_1object__named__system.html#a35f709b685919d096e49acb8edefe02f">operator new</a> (std::size_t bytes, void *ptr)</td></tr>
<tr class="memdesc:a35f709b685919d096e49acb8edefe02f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emplace a new object instance.  <a href="#a35f709b685919d096e49acb8edefe02f">More...</a><br /></td></tr>
<tr class="separator:a35f709b685919d096e49acb8edefe02f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27026070d8fd2c51873036cfd1661ce4"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1internal_1_1object__named__system.html#a27026070d8fd2c51873036cfd1661ce4">operator new[]</a> (std::size_t bytes)</td></tr>
<tr class="memdesc:a27026070d8fd2c51873036cfd1661ce4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate space for an array of new object instances using the RTOS system allocator.  <a href="#a27026070d8fd2c51873036cfd1661ce4">More...</a><br /></td></tr>
<tr class="separator:a27026070d8fd2c51873036cfd1661ce4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad415429ae3487ec5ae1258b4d2a5787f"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1internal_1_1object__named__system.html#ad415429ae3487ec5ae1258b4d2a5787f">operator new[]</a> (std::size_t bytes, void *ptr)</td></tr>
<tr class="memdesc:ad415429ae3487ec5ae1258b4d2a5787f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emplace an array of new object instances.  <a href="#ad415429ae3487ec5ae1258b4d2a5787f">More...</a><br /></td></tr>
<tr class="separator:ad415429ae3487ec5ae1258b4d2a5787f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef5d78f2ac3f37daf3984758c9e2ddb2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1internal_1_1object__named__system.html#aef5d78f2ac3f37daf3984758c9e2ddb2">operator delete</a> (void *ptr, std::size_t bytes)</td></tr>
<tr class="memdesc:aef5d78f2ac3f37daf3984758c9e2ddb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deallocate the dynamically allocated object instance. using the RTOS system allocator.  <a href="#aef5d78f2ac3f37daf3984758c9e2ddb2">More...</a><br /></td></tr>
<tr class="separator:aef5d78f2ac3f37daf3984758c9e2ddb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc1c29f4a020deee857f22330e0277ed"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1internal_1_1object__named__system.html#adc1c29f4a020deee857f22330e0277ed">operator delete[]</a> (void *ptr, std::size_t bytes)</td></tr>
<tr class="memdesc:adc1c29f4a020deee857f22330e0277ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deallocate the dynamically allocated array of object. instances using the RTOS system allocator.  <a href="#adc1c29f4a020deee857f22330e0277ed">More...</a><br /></td></tr>
<tr class="separator:adc1c29f4a020deee857f22330e0277ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:ga40cf8256124467cd9c58410969808979"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga26895a3c081fd319cb199d21c4028963">priority_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga40cf8256124467cd9c58410969808979">default_priority</a> = 0</td></tr>
<tr class="memdesc:ga40cf8256124467cd9c58410969808979"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default message priority.  <a href="group__cmsis-plus-rtos-mqueue.html#ga40cf8256124467cd9c58410969808979">More...</a><br /></td></tr>
<tr class="separator:ga40cf8256124467cd9c58410969808979"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga56b50be700d2a0af4b41457bc44be8ee"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="classos_1_1rtos_1_1message__queue_1_1attributes.html">attributes</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga56b50be700d2a0af4b41457bc44be8ee">initializer</a></td></tr>
<tr class="memdesc:ga56b50be700d2a0af4b41457bc44be8ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default message queue initialiser.  <a href="group__cmsis-plus-rtos-mqueue.html#ga56b50be700d2a0af4b41457bc44be8ee">More...</a><br /></td></tr>
<tr class="separator:ga56b50be700d2a0af4b41457bc44be8ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga041d0cf777c082b3a64dd16052e9bf90"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="group__cmsis-plus-rtos-mqueue.html#gaee507fd1f777940280b9246bff1018d3">msg_size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga041d0cf777c082b3a64dd16052e9bf90">max_msg_size</a> = 0xFFFF</td></tr>
<tr class="memdesc:ga041d0cf777c082b3a64dd16052e9bf90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum message size.  <a href="group__cmsis-plus-rtos-mqueue.html#ga041d0cf777c082b3a64dd16052e9bf90">More...</a><br /></td></tr>
<tr class="separator:ga041d0cf777c082b3a64dd16052e9bf90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga242b5035f07fb9deedd6739e26edef3f"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga26895a3c081fd319cb199d21c4028963">priority_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga242b5035f07fb9deedd6739e26edef3f">max_priority</a> = 0xFF</td></tr>
<tr class="memdesc:ga242b5035f07fb9deedd6739e26edef3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum message priority.  <a href="group__cmsis-plus-rtos-mqueue.html#ga242b5035f07fb9deedd6739e26edef3f">More...</a><br /></td></tr>
<tr class="separator:ga242b5035f07fb9deedd6739e26edef3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafba3f2650328e5ea1bbcfe06541936d8"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga733ed9282c7d8df162a7863851426789">message_queue::size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmsis-plus-rtos-mqueue.html#gafba3f2650328e5ea1bbcfe06541936d8">max_size</a> = 0xFF</td></tr>
<tr class="memdesc:gafba3f2650328e5ea1bbcfe06541936d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum queue size.  <a href="group__cmsis-plus-rtos-mqueue.html#gafba3f2650328e5ea1bbcfe06541936d8">More...</a><br /></td></tr>
<tr class="separator:gafba3f2650328e5ea1bbcfe06541936d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafb32c8676f31ac44c5fd8d2782b41e3f"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga2983d5ecc043f3be220ae96619bfa148">index_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmsis-plus-rtos-mqueue.html#gafb32c8676f31ac44c5fd8d2782b41e3f">no_index</a> = <a class="el" href="group__cmsis-plus-rtos-mqueue.html#gafba3f2650328e5ea1bbcfe06541936d8">max_size</a></td></tr>
<tr class="memdesc:gafb32c8676f31ac44c5fd8d2782b41e3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index value to represent an illegal index.  <a href="group__cmsis-plus-rtos-mqueue.html#gafb32c8676f31ac44c5fd8d2782b41e3f">More...</a><br /></td></tr>
<tr class="separator:gafb32c8676f31ac44c5fd8d2782b41e3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>POSIX compliant <b>message queue</b>, using the default RTOS allocator. </p>
<p>POSIX message queues allow threads to exchange data in the form of messages. Messages are transferred to and from a queue using <a class="el" href="classos_1_1rtos_1_1message__queue.html#a3e6feb26468955f0eef1251a94f04091" title="Send a message to the queue. ">send()</a> and <a class="el" href="classos_1_1rtos_1_1message__queue.html#a0a1a56c91c116aeedcc0a6da9f09ee7d" title="Receive a message from the queue. ">receive()</a>. Each message has an associated priority, and messages are always delivered to the receiving process highest priority first.</p>
<p>The storage for the message queue is allocated dynamically, using the RTOS specific allocator (<code>os::memory::allocator</code>).</p>
<p>For special cases, the storage can be allocated outside the class and specified via the <code>mq_queue_address</code> and <code>mq_queue_size_bytes</code> attributes.</p>
<p><a class="el" href="classos_1_1rtos_1_1message__queue.html" title="POSIX compliant message queue, using the default RTOS allocator. ">message_queue</a> is a representative instance of the <a class="el" href="classos_1_1rtos_1_1message__queue__allocated.html" title="Template of a POSIX compliant message queue with allocator. ">message_queue_allocated</a> template; it is also used by the C API.</p>
<dl class="section user"><dt>Example</dt><dd></dd></dl>
<div class="fragment"><div class="line"><span class="comment">// Define the message type.</span></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line">  uint32_t id;</div><div class="line">} msg_t;</div><div class="line"></div><div class="line"><span class="comment">// Define the queue size.</span></div><div class="line">constexpr uint32_t queue_size = 5;</div><div class="line"></div><div class="line"><span class="comment">// The queue storage is allocated dynamically on the heap.</span></div><div class="line"><a class="code" href="classos_1_1rtos_1_1message__queue.html#abdffbae1fad40d43c075210034f2eab4">message_queue</a> mq { queue_size, <span class="keyword">sizeof</span>(msg_t) };</div><div class="line"></div><div class="line"><span class="keywordtype">void</span></div><div class="line">consumer(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">  <span class="comment">// Do something</span></div><div class="line">  msg_t msg;</div><div class="line">  <span class="keywordflow">for</span> (; some_condition();)</div><div class="line">    {</div><div class="line">      mq.receive(&amp;msg, <span class="keyword">sizeof</span>(msg));</div><div class="line">      <span class="comment">// Process message</span></div><div class="line">      <span class="keywordflow">if</span> (msg.id == 7)</div><div class="line">        {</div><div class="line">          <span class="comment">// Something special</span></div><div class="line">        }</div><div class="line">    }</div><div class="line">  <span class="comment">// Do something else.</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span></div><div class="line">producer(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">  <span class="comment">// Do something</span></div><div class="line">  msg_t msg;</div><div class="line">  msg.id = 7;</div><div class="line">  mq.send(&amp;msg, <span class="keyword">sizeof</span>(msg));</div><div class="line">  <span class="comment">// Do something else.</span></div><div class="line">}</div></div><!-- fragment --><dl class="section user"><dt>POSIX compatibility</dt><dd>Inspired by <code>mqd_t</code> from <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/mqueue.h.html">&lt;mqueue.h&gt;</a> (<a href="http://pubs.opengroup.org/onlinepubs/9699919799/nframe.html">IEEE Std 1003.1, 2013 Edition</a>). </dd></dl>

<p>Definition at line <a class="el" href="os-mqueue_8h_source.html#l00058">58</a> of file <a class="el" href="os-mqueue_8h_source.html">os-mqueue.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="abdffbae1fad40d43c075210034f2eab4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">os::rtos::message_queue::message_queue </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>msgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>msg_size_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classos_1_1rtos_1_1message__queue_1_1attributes.html">attributes</a> &amp;&#160;</td>
          <td class="paramname"><em>attr</em> = <code><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga56b50be700d2a0af4b41457bc44be8ee">initializer</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga99e8ba430c6176765669424acded3f0e">allocator_type</a> &amp;&#160;</td>
          <td class="paramname"><em>allocator</em> = <code><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga99e8ba430c6176765669424acded3f0e">allocator_type</a>&#160;()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a message queue object instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">msgs</td><td>The number of messages. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg_size_bytes</td><td>The message size, in bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attr</td><td>Reference to attributes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">allocator</td><td>Reference to allocator. Default a local temporary instance.</td></tr>
  </table>
  </dd>
</dl>
<p>This constructor shall initialise a message queue object with attributes referenced by <em>attr</em>. If the attributes specified by <em>attr</em> are modified later, the memory pool attributes shall not be affected. Upon successful initialisation, the state of the message queue object shall become initialised.</p>
<p>Only the message queue itself may be used for performing synchronisation. It is not allowed to make copies of message queue objects.</p>
<p>In cases where default message queue attributes are appropriate, the variable <code><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga56b50be700d2a0af4b41457bc44be8ee" title="Default message queue initialiser. ">message_queue::initializer</a></code> can be used to initialise message queue. The effect shall be equivalent to creating a message queue object with the simple constructor.</p>
<p>If the attributes define a storage area (via <code>mq_queue_address</code> and <code>mq_queue_size_bytes</code>), that storage is used, otherwise the storage is dynamically allocated using the RTOS specific allocator (<code><a class="el" href="group__cmsis-plus-rtos-memres.html#gac00e47b1a65850b96de7c9fe0e938da1" title="Type of allocator used by the system objects. Must be stateless. ">rtos::memory::allocator</a></code>).</p>
<dl class="section warning"><dt>Warning</dt><dd>Cannot be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-mqueue_8cpp_source.html#l00382">382</a> of file <a class="el" href="os-mqueue_8cpp_source.html">os-mqueue.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aea0cb2073877631502157dda881ca7a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">os::rtos::message_queue::message_queue </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>msgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>msg_size_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classos_1_1rtos_1_1message__queue_1_1attributes.html">attributes</a> &amp;&#160;</td>
          <td class="paramname"><em>attr</em> = <code><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga56b50be700d2a0af4b41457bc44be8ee">initializer</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga99e8ba430c6176765669424acded3f0e">allocator_type</a> &amp;&#160;</td>
          <td class="paramname"><em>allocator</em> = <code><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga99e8ba430c6176765669424acded3f0e">allocator_type</a>&#160;()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a named message queue object instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>Pointer to name. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msgs</td><td>The number of messages. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg_size_bytes</td><td>The message size, in bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attr</td><td>Reference to attributes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">allocator</td><td>Reference to allocator. Default a local temporary instance.</td></tr>
  </table>
  </dd>
</dl>
<p>This constructor shall initialise a named message queue object with attributes referenced by <em>attr</em>. If the attributes specified by <em>attr</em> are modified later, the memory pool attributes shall not be affected. Upon successful initialisation, the state of the message queue object shall become initialised.</p>
<p>Only the message queue itself may be used for performing synchronisation. It is not allowed to make copies of message queue objects.</p>
<p>In cases where default message queue attributes are appropriate, the variable <code><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga56b50be700d2a0af4b41457bc44be8ee" title="Default message queue initialiser. ">message_queue::initializer</a></code> can be used to initialise message queue. The effect shall be equivalent to creating a message queue object with the simple constructor.</p>
<p>If the attributes define a storage area (via <code>mq_queue_address</code> and <code>mq_queue_size_bytes</code>), that storage is used, otherwise the storage is dynamically allocated using the RTOS specific allocator (<code><a class="el" href="group__cmsis-plus-rtos-memres.html#gac00e47b1a65850b96de7c9fe0e938da1" title="Type of allocator used by the system objects. Must be stateless. ">rtos::memory::allocator</a></code>).</p>
<dl class="section warning"><dt>Warning</dt><dd>Cannot be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-mqueue_8cpp_source.html#l00417">417</a> of file <a class="el" href="os-mqueue_8cpp_source.html">os-mqueue.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5cef7d6e988dffa5439071661cc9bcb8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">os::rtos::message_queue::~message_queue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destruct the message queue object instance. </p>
<p>This destructor shall destroy the message queue object; the object becomes, in effect, uninitialised. An implementation may cause the destructor to set the object to an invalid value.</p>
<p>It shall be safe to destroy an initialised message queue object upon which no threads are currently blocked. Attempting to destroy a message queue object upon which other threads are currently blocked results in undefined behaviour.</p>
<p>If the storage for the message queue was dynamically allocated, it is deallocated using the same allocator. </p>

<p>Definition at line <a class="el" href="os-mqueue_8cpp_source.html#l00473">473</a> of file <a class="el" href="os-mqueue_8cpp_source.html">os-mqueue.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ae4ee2f72a8b72a663b16f8fa0e0dc244"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t os::rtos::message_queue::capacity </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get queue capacity. </p>
<dl class="section user"><dt>Parameters</dt><dd>None. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The max number of messages that can be queued.</dd></dl>
<dl class="section user"><dt>POSIX compatibility</dt><dd></dd></dl>
<dl class="section note"><dt>Note</dt><dd>Can be invoked from Interrupt Service Routines. Extension to standard, no POSIX similar functionality identified. </dd></dl>

<p>Definition at line <a class="el" href="os-mqueue_8h_source.html#l01298">1298</a> of file <a class="el" href="os-mqueue_8h_source.html">os-mqueue.h</a>.</p>

</div>
</div>
<a class="anchor" id="a927870645dd32ddabdf2a701bfa4cdaa"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr std::size_t os::rtos::message_queue::compute_allocated_size_bytes </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>msgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>msg_size_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculator for queue storage requirements. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msgs</td><td>Number of messages. </td></tr>
    <tr><td class="paramname">msg_size_bytes</td><td>Size of message. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Total required storage in bytes, including internal alignment. </dd></dl>

<p>Definition at line <a class="el" href="os-mqueue_8h_source.html#l00241">241</a> of file <a class="el" href="os-mqueue_8h_source.html">os-mqueue.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae5f62d011ae11c87de47ebb528b17432"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool os::rtos::message_queue::empty </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the queue is empty. </p>
<dl class="section user"><dt>Parameters</dt><dd>None. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>The queue has no messages. </td></tr>
    <tr><td class="paramname">false</td><td>The queue has some messages.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Extension to standard, no POSIX similar functionality identified.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Can be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-mqueue_8h_source.html#l01324">1324</a> of file <a class="el" href="os-mqueue_8h_source.html">os-mqueue.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6106138213cbf09c034242aa6a32509e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool os::rtos::message_queue::full </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the queue is full. </p>
<dl class="section user"><dt>Parameters</dt><dd>None. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>The queue is full. </td></tr>
    <tr><td class="paramname">false</td><td>The queue is not full.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Extension to standard, no POSIX similar functionality identified.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Can be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-mqueue_8h_source.html#l01337">1337</a> of file <a class="el" href="os-mqueue_8h_source.html">os-mqueue.h</a>.</p>

</div>
</div>
<a class="anchor" id="aff78d42a19d99e3fde893970fc6b08cd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t os::rtos::message_queue::length </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get queue length. </p>
<dl class="section user"><dt>Parameters</dt><dd>None. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The number of messages in the queue.</dd></dl>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Extension to standard, no POSIX similar functionality identified.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Can be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-mqueue_8h_source.html#l01285">1285</a> of file <a class="el" href="os-mqueue_8h_source.html">os-mqueue.h</a>.</p>

</div>
</div>
<a class="anchor" id="a377039a7f208bbc1c85ed53ac753c360"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t os::rtos::message_queue::msg_size </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get message size. </p>
<dl class="section user"><dt>Parameters</dt><dd>None. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The message size, in bytes.</dd></dl>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Extension to standard, no POSIX similar functionality identified.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Can be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-mqueue_8h_source.html#l01311">1311</a> of file <a class="el" href="os-mqueue_8h_source.html">os-mqueue.h</a>.</p>

</div>
</div>
<a class="anchor" id="a36805a0eae21688c136129059482c3dd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char * os::rtos::internal::object_named::name </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get object name. </p>
<dl class="section user"><dt>Parameters</dt><dd>None. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>A null terminated string.</dd></dl>
<p>All objects return a non-null string; anonymous objects return <code>"-"</code>.</p>
<dl class="section note"><dt>Note</dt><dd>Can be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-decls_8h_source.html#l00760">760</a> of file <a class="el" href="os-decls_8h_source.html">os-decls.h</a>.</p>

</div>
</div>
<a class="anchor" id="aef5d78f2ac3f37daf3984758c9e2ddb2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void os::rtos::internal::object_named_system::operator delete </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Deallocate the dynamically allocated object instance. using the RTOS system allocator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>Pointer to object. </td></tr>
    <tr><td class="paramname">bytes</td><td>Number of bytes to deallocate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Returns</dt><dd>Nothing.</dd></dl>
<p>The deallocation function (3.7.4.2) called by a delete-expression to render the value of <em>ptr</em> invalid.</p>
<p><em>ptr</em> shall be a null pointer or its value shall be a value returned by an earlier call to the (possibly replaced) <a class="el" href="classos_1_1rtos_1_1internal_1_1object__named__system.html#a1456983acc3a56e02cd4a48a220f222c" title="Allocate space for a new object instance using the RTOS system allocator. ">operator new()</a> which has not been invalidated by an intervening call to <a class="el" href="group__cmsis-plus-rtos-memres.html#gafa145befcf5e7b83424408ca503c8637" title="Deallocate the dynamically allocated object instance. ">operator delete(void*)</a>.</p>
<p>If <em>ptr</em> is null, does nothing. Otherwise, reclaims the storage allocated by the earlier call to operator new.</p>
<p>The storage is deallocated using the RTOS system allocator.</p>
<dl class="section warning"><dt>Warning</dt><dd>Cannot be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-inlines_8h_source.html#l00134">134</a> of file <a class="el" href="os-inlines_8h_source.html">os-inlines.h</a>.</p>

</div>
</div>
<a class="anchor" id="adc1c29f4a020deee857f22330e0277ed"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void os::rtos::internal::object_named_system::operator delete[] </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Deallocate the dynamically allocated array of object. instances using the RTOS system allocator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>Pointer to array of objects. </td></tr>
    <tr><td class="paramname">bytes</td><td>Number of bytes to deallocate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Returns</dt><dd>Nothing.</dd></dl>
<p>The deallocation function (3.7.4.2) called by the array form of a delete-expression to render the value of <em>ptr</em> invalid.</p>
<p>If <em>ptr</em> is null, does nothing. Otherwise, reclaims the storage allocated by the earlier call to operator new.</p>
<p>The storage is deallocated using the RTOS system allocator.</p>
<dl class="section warning"><dt>Warning</dt><dd>Cannot be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-inlines_8h_source.html#l00155">155</a> of file <a class="el" href="os-inlines_8h_source.html">os-inlines.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1456983acc3a56e02cd4a48a220f222c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void * os::rtos::internal::object_named_system::operator new </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>bytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocate space for a new object instance using the RTOS system allocator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bytes</td><td>Number of bytes to allocate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to allocated object.</dd></dl>
<p>The allocation function (3.7.4.1) called by a new-expression (5.3.4) to allocate a storage of size <em>bytes</em> suitably aligned to represent any object of that size. Return a non-null pointer to suitably aligned storage (3.7.4).</p>
<p>The storage is allocated using the RTOS system allocator.</p>
<dl class="section warning"><dt>Warning</dt><dd>Cannot be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-inlines_8h_source.html#l00056">56</a> of file <a class="el" href="os-inlines_8h_source.html">os-inlines.h</a>.</p>

</div>
</div>
<a class="anchor" id="a35f709b685919d096e49acb8edefe02f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void * os::rtos::internal::object_named_system::operator new </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Emplace a new object instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bytes</td><td>Number of bytes to emplace. </td></tr>
    <tr><td class="paramname">ptr</td><td>Pointer to location to emplace the object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to emplaced object.</dd></dl>
<p>The allocation function (3.7.4.1) called by a placement new-expression to allocate a storage of size <em>bytes</em> suitably aligned to represent any object of that size. Return a non-null pointer to suitably aligned storage (3.7.4).</p>
<p>The storage is allocated using the RTOS system allocator.</p>
<dl class="section warning"><dt>Warning</dt><dd>Cannot be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-inlines_8h_source.html#l00093">93</a> of file <a class="el" href="os-inlines_8h_source.html">os-inlines.h</a>.</p>

</div>
</div>
<a class="anchor" id="a27026070d8fd2c51873036cfd1661ce4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void * os::rtos::internal::object_named_system::operator new[] </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>bytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocate space for an array of new object instances using the RTOS system allocator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bytes</td><td>Number of bytes to allocate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to allocated array.</dd></dl>
<p>The allocation function (3.7.4.1) called by the array form of a new-expression (5.3.4) to allocate a storage of size <em>bytes</em> suitably aligned to represent any array object of that size or smaller.</p>
<p>The storage is allocated using the RTOS system allocator.</p>
<dl class="section warning"><dt>Warning</dt><dd>Cannot be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-inlines_8h_source.html#l00074">74</a> of file <a class="el" href="os-inlines_8h_source.html">os-inlines.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad415429ae3487ec5ae1258b4d2a5787f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void * os::rtos::internal::object_named_system::operator new[] </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Emplace an array of new object instances. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bytes</td><td>Number of bytes to emplace. </td></tr>
    <tr><td class="paramname">ptr</td><td>Pointer to location to emplace the object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to emplaced array.</dd></dl>
<p>The allocation function (3.7.4.1) called by the array form of a placement new-expression to allocate a storage of size <em>bytes</em> suitably aligned to represent any array object of that size or smaller.</p>
<p>The storage is allocated using the RTOS system allocator.</p>
<dl class="section warning"><dt>Warning</dt><dd>Cannot be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-inlines_8h_source.html#l00110">110</a> of file <a class="el" href="os-inlines_8h_source.html">os-inlines.h</a>.</p>

</div>
</div>
<a class="anchor" id="a07e2f118b21e0e352440525117afbdc3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool os::rtos::message_queue::operator== </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classos_1_1rtos_1_1message__queue.html">message_queue</a> &amp;&#160;</td>
          <td class="paramname"><em>rhs</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compare memory queues. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>The given memory queue is the same as this memory queue. </td></tr>
    <tr><td class="paramname">false</td><td>The memory queues are different.</td></tr>
  </table>
  </dd>
</dl>
<p>Identical message queues should have the same memory address.</p>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Extension to standard, no POSIX similar functionality identified. </dd></dl>

<p>Definition at line <a class="el" href="os-mqueue_8h_source.html#l01272">1272</a> of file <a class="el" href="os-mqueue_8h_source.html">os-mqueue.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0a1a56c91c116aeedcc0a6da9f09ee7d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a> os::rtos::message_queue::receive </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>nbytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga26895a3c081fd319cb199d21c4028963">priority_t</a> *&#160;</td>
          <td class="paramname"><em>mprio</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive a message from the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">msg</td><td>The address where to store the dequeued message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nbytes</td><td>The size of the destination buffer. Must be lower than the value used when creating the queue. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">mprio</td><td>The address where to store the message priority. The default is <code>nullptr</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="namespaceos_1_1rtos_1_1result.html#a1f5b41a48ca4ac9f7aeb3bd1c702b45aac3daa6d58a1202b112a91628d144685b" title="Function completed; no errors or events occurred. ">result::ok</a></td><td>The message was received. </td></tr>
    <tr><td class="paramname">EINVAL</td><td>A parameter is invalid or outside of a permitted range. </td></tr>
    <tr><td class="paramname">EMSGSIZE</td><td>The specified message length, nbytes, is greater than the message size attribute of the message queue. </td></tr>
    <tr><td class="paramname">EPERM</td><td>Cannot be invoked from an Interrupt Service Routines. </td></tr>
    <tr><td class="paramname">ENOTRECOVERABLE</td><td>The message could not be dequeued (extension to POSIX). </td></tr>
    <tr><td class="paramname">EBADMSG</td><td>The implementation has detected a data corruption problem with the message. </td></tr>
    <tr><td class="paramname">EINTR</td><td>The operation was interrupted.</td></tr>
  </table>
  </dd>
</dl>
<p>The <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a0a1a56c91c116aeedcc0a6da9f09ee7d" title="Receive a message from the queue. ">receive()</a></code> function shall receive the oldest of the highest priority message(s) from the message queue. If the size of the buffer in bytes, specified by the <em>nbytes</em> argument, is less than the <em>msg_size_bytes</em> attribute of the message queue, the function shall fail and return an error. Otherwise, the selected message shall be removed from the queue and copied to the buffer pointed to by the <em>msg</em> argument.</p>
<p>If the value of <em>nbytes</em> is greater than <code><a class="el" href="group__cmsis-plus-rtos-mqueue.html#gafba3f2650328e5ea1bbcfe06541936d8" title="Maximum queue size. ">message_queue::max_size</a></code>, the result is implementation-defined.</p>
<p>If the argument <em>mprio</em> is not nullptr, the priority of the selected message shall be stored in the location referenced by <em>mprio</em>.</p>
<p>If the message queue is empty, <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a0a1a56c91c116aeedcc0a6da9f09ee7d" title="Receive a message from the queue. ">receive()</a></code> shall block until a message is enqueued on the message queue or until <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a0a1a56c91c116aeedcc0a6da9f09ee7d" title="Receive a message from the queue. ">receive()</a></code> is cancelled/interrupted. If more than one thread is waiting to receive a message when a message arrives at an empty queue and the Priority Scheduling option is supported, then the thread of highest priority that has been waiting the longest shall be selected to receive the message. Otherwise, it is unspecified which waiting thread receives the message.</p>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Inspired by <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/mq_receive.html"><code>mq_receive()</code></a> with <code>O_NONBLOCK</code> not set, from <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/mqueue.h.html">&lt;mqueue.h&gt;</a> (<a href="http://pubs.opengroup.org/onlinepubs/9699919799/nframe.html">IEEE Std 1003.1, 2013 Edition</a>).</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Cannot be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-mqueue_8cpp_source.html#l01198">1198</a> of file <a class="el" href="os-mqueue_8cpp_source.html">os-mqueue.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a0e1d0aff24922dc2dccc4f150f65e78c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a> os::rtos::message_queue::reset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the message queue. </p>
<dl class="section user"><dt>Parameters</dt><dd>None. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="namespaceos_1_1rtos_1_1result.html#a1f5b41a48ca4ac9f7aeb3bd1c702b45aac3daa6d58a1202b112a91628d144685b" title="Function completed; no errors or events occurred. ">result::ok</a></td><td>The queue was reset. </td></tr>
    <tr><td class="paramname">EPERM</td><td>Cannot be invoked from an Interrupt Service Routines.</td></tr>
  </table>
  </dd>
</dl>
<p>Clear both send and receive counter and return the queue to the initial state.</p>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Extension to standard, no POSIX similar functionality identified.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Cannot be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-mqueue_8cpp_source.html#l01521">1521</a> of file <a class="el" href="os-mqueue_8cpp_source.html">os-mqueue.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a3e6feb26468955f0eef1251a94f04091"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a> os::rtos::message_queue::send </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>nbytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga26895a3c081fd319cb199d21c4028963">priority_t</a>&#160;</td>
          <td class="paramname"><em>mprio</em> = <code><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga40cf8256124467cd9c58410969808979">default_priority</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a message to the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>The address of the message to enqueue. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nbytes</td><td>The length of the message. Must be not higher than the value used when creating the queue. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mprio</td><td>The message priority. The default is 0. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="namespaceos_1_1rtos_1_1result.html#a1f5b41a48ca4ac9f7aeb3bd1c702b45aac3daa6d58a1202b112a91628d144685b" title="Function completed; no errors or events occurred. ">result::ok</a></td><td>The message was enqueued. </td></tr>
    <tr><td class="paramname">EINVAL</td><td>A parameter is invalid or outside of a permitted range. </td></tr>
    <tr><td class="paramname">EMSGSIZE</td><td>The specified message length, nbytes, exceeds the message size attribute of the message queue. </td></tr>
    <tr><td class="paramname">EPERM</td><td>Cannot be invoked from an Interrupt Service Routines. </td></tr>
    <tr><td class="paramname">ENOTRECOVERABLE</td><td>The message could not be enqueue (extension to POSIX). </td></tr>
    <tr><td class="paramname">EINTR</td><td>The operation was interrupted.</td></tr>
  </table>
  </dd>
</dl>
<p>The <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a3e6feb26468955f0eef1251a94f04091" title="Send a message to the queue. ">send()</a></code> function shall add the message pointed to by the argument <em>msg</em> to the message queue. The <em>nbytes</em> argument specifies the length of the message, in bytes, pointed to by <em>msg</em>. The value of <em>nbytes</em> shall be less than or equal to the <em>msg_size_bytes</em> parameter of the message queue object, or <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a3e6feb26468955f0eef1251a94f04091" title="Send a message to the queue. ">send()</a></code> shall fail.</p>
<p>If the specified message queue is not full, <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a3e6feb26468955f0eef1251a94f04091" title="Send a message to the queue. ">send()</a></code> shall behave as if the message is inserted into the message queue at the position indicated by the <em>mprio</em> argument. A message with a larger numeric value of <em>mprio</em> shall be inserted before messages with lower values of <em>mprio</em>. A message shall be inserted after other messages in the queue, if any, with equal <em>mprio</em>. The value of <em>mprio</em> shall be less than <code><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga242b5035f07fb9deedd6739e26edef3f" title="Maximum message priority. ">message_queue::max_priority</a></code>.</p>
<p>If the specified message queue is full, <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a3e6feb26468955f0eef1251a94f04091" title="Send a message to the queue. ">send()</a></code> shall block until space becomes available to enqueue the message, or until <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a3e6feb26468955f0eef1251a94f04091" title="Send a message to the queue. ">send()</a></code> is cancelled/interrupted. If more than one thread is waiting to send when space becomes available in the message queue and the Priority Scheduling option is supported, then the thread of the highest priority that has been waiting the longest shall be unblocked to send its message. Otherwise, it is unspecified which waiting thread is unblocked.</p>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Inspired by <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/mq_send.html"><code>mq_send()</code></a> with <code>O_NONBLOCK</code> not set, from <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/mqueue.h.html">&lt;mqueue.h&gt;</a> (<a href="http://pubs.opengroup.org/onlinepubs/9699919799/nframe.html">IEEE Std 1003.1, 2013 Edition</a>).</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Cannot be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-mqueue_8cpp_source.html#l00866">866</a> of file <a class="el" href="os-mqueue_8cpp_source.html">os-mqueue.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a6a86c028b46b689fbc50a035639200ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a> os::rtos::message_queue::timed_receive </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>nbytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cmsis-plus-rtos-clock.html#ga149d8b5cea55224ef5cfede8a81df04c">clock::duration_t</a>&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga26895a3c081fd319cb199d21c4028963">priority_t</a> *&#160;</td>
          <td class="paramname"><em>mprio</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive a message from the queue with timeout. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">msg</td><td>The address where to store the dequeued message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nbytes</td><td>The size of the destination buffer. Must be lower than the value used when creating the queue. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>The timeout duration. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">mprio</td><td>The address where to store the message priority. The default is <code>nullptr</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="namespaceos_1_1rtos_1_1result.html#a1f5b41a48ca4ac9f7aeb3bd1c702b45aac3daa6d58a1202b112a91628d144685b" title="Function completed; no errors or events occurred. ">result::ok</a></td><td>The message was received. </td></tr>
    <tr><td class="paramname">EINVAL</td><td>A parameter is invalid or outside of a permitted range. </td></tr>
    <tr><td class="paramname">EMSGSIZE</td><td>The specified message length, nbytes, is greater than the message size attribute of the message queue. </td></tr>
    <tr><td class="paramname">EPERM</td><td>Cannot be invoked from an Interrupt Service Routines. </td></tr>
    <tr><td class="paramname">ENOTRECOVERABLE</td><td>The message could not be dequeued (extension to POSIX). </td></tr>
    <tr><td class="paramname">EBADMSG</td><td>The implementation has detected a data corruption problem with the message. </td></tr>
    <tr><td class="paramname">EINTR</td><td>The operation was interrupted. </td></tr>
    <tr><td class="paramname">ETIMEDOUT</td><td>No message arrived on the queue before the specified timeout expired.</td></tr>
  </table>
  </dd>
</dl>
<p>The <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a6a86c028b46b689fbc50a035639200ba" title="Receive a message from the queue with timeout. ">timed_receive()</a></code> function shall receive the oldest of the highest priority message(s) from the message queue. If the size of the buffer in bytes, specified by the <em>nbytes</em> argument, is less than the <em>msg_size_bytes</em> attribute of the message queue, the function shall fail and return an error. Otherwise, the selected message shall be removed from the queue and copied to the buffer pointed to by the <em>msg</em> argument.</p>
<p>If the value of <em>nbytes</em> is greater than <code><a class="el" href="group__cmsis-plus-rtos-mqueue.html#gafba3f2650328e5ea1bbcfe06541936d8" title="Maximum queue size. ">message_queue::max_size</a></code>, the result is implementation-defined.</p>
<p>If the argument <em>mprio</em> is not nullptr, the priority of the selected message shall be stored in the location referenced by <em>mprio</em>.</p>
<p>If the message queue is empty, <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a6a86c028b46b689fbc50a035639200ba" title="Receive a message from the queue with timeout. ">timed_receive()</a></code> shall block until a message is enqueued on the message queue or until <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a6a86c028b46b689fbc50a035639200ba" title="Receive a message from the queue with timeout. ">timed_receive()</a></code> is cancelled/interrupted. If more than one thread is waiting to receive a message when a message arrives at an empty queue and the Priority Scheduling option is supported, then the thread of highest priority that has been waiting the longest shall be selected to receive the message. Otherwise, it is unspecified which waiting thread receives the message.</p>
<p>The <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a6a86c028b46b689fbc50a035639200ba" title="Receive a message from the queue with timeout. ">timed_receive()</a></code> function shall receive the oldest of the highest priority messages from the message queue as described for the <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a0a1a56c91c116aeedcc0a6da9f09ee7d" title="Receive a message from the queue. ">receive()</a></code> function. However, if no message exists on the queue to satisfy the receive, the wait for such a message shall be terminated when the specified timeout expires.</p>
<p>The timeout shall expire after the number of time units (that is when the value of that clock equals or exceeds (now()+duration). The resolution of the timeout shall be the resolution of the clock on which it is based.</p>
<p>Under no circumstance shall the operation fail with a timeout if a message can be removed from the message queue immediately.</p>
<p>The clock used for timeouts can be specified via the <code>clock</code> attribute. By default, the clock derived from the scheduler timer is used, and the durations are expressed in ticks.</p>
<p>Compatible with POSIX <code>mq_receive()</code> with O_NONBLOCK set. <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/mq_receive.html#">http://pubs.opengroup.org/onlinepubs/9699919799/functions/mq_receive.html#</a></p>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Inspired by <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/mq_timedreceive.html"><code>mq_timedreceive()</code></a> with <code>O_NONBLOCK</code> not set, from <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/mqueue.h.html">&lt;mqueue.h&gt;</a> (<a href="http://pubs.opengroup.org/onlinepubs/9699919799/nframe.html">IEEE Std 1003.1, 2013 Edition</a>). <br />
Differences from the standard:<ul>
<li>the timeout is not expressed as an absolute time point, but as a relative number of timer ticks (by default, the SysTick clock for CMSIS).</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Cannot be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-mqueue_8cpp_source.html#l01408">1408</a> of file <a class="el" href="os-mqueue_8cpp_source.html">os-mqueue.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a8bea78cd3cc3a5b6111f841bb049e668"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a> os::rtos::message_queue::timed_send </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>nbytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cmsis-plus-rtos-clock.html#ga149d8b5cea55224ef5cfede8a81df04c">clock::duration_t</a>&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga26895a3c081fd319cb199d21c4028963">priority_t</a>&#160;</td>
          <td class="paramname"><em>mprio</em> = <code><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga40cf8256124467cd9c58410969808979">default_priority</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a message to the queue with timeout. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>The address of the message to enqueue. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nbytes</td><td>The length of the message. Must be not higher than the value used when creating the queue. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>The timeout duration. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mprio</td><td>The message priority. The default is 0. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="namespaceos_1_1rtos_1_1result.html#a1f5b41a48ca4ac9f7aeb3bd1c702b45aac3daa6d58a1202b112a91628d144685b" title="Function completed; no errors or events occurred. ">result::ok</a></td><td>The message was enqueued. </td></tr>
    <tr><td class="paramname">EINVAL</td><td>A parameter is invalid or outside of a permitted range. </td></tr>
    <tr><td class="paramname">EMSGSIZE</td><td>The specified message length, nbytes, exceeds the message size attribute of the message queue. </td></tr>
    <tr><td class="paramname">EPERM</td><td>Cannot be invoked from an Interrupt Service Routines. </td></tr>
    <tr><td class="paramname">ETIMEDOUT</td><td>The timeout expired before the message could be added to the queue. </td></tr>
    <tr><td class="paramname">ENOTRECOVERABLE</td><td>The message could not be enqueue (extension to POSIX). </td></tr>
    <tr><td class="paramname">EINTR</td><td>The operation was interrupted.</td></tr>
  </table>
  </dd>
</dl>
<p>The <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a8bea78cd3cc3a5b6111f841bb049e668" title="Send a message to the queue with timeout. ">timed_send()</a></code> function shall add the message pointed to by the argument <em>msg</em> to the message queue. The <em>nbytes</em> argument specifies the length of the message, in bytes, pointed to by <em>msg</em>. The value of <em>nbytes</em> shall be less than or equal to the <em>msg_size_bytes</em> attribute of the message queue object, or <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a8bea78cd3cc3a5b6111f841bb049e668" title="Send a message to the queue with timeout. ">timed_send()</a></code> shall fail.</p>
<p>If the message queue is not full, <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a8bea78cd3cc3a5b6111f841bb049e668" title="Send a message to the queue with timeout. ">timed_send()</a></code> shall behave as if the message is inserted into the message queue at the position indicated by the <em>mprio</em> argument. A message with a larger numeric value of <em>mprio</em> shall be inserted before messages with lower values of <em>mprio</em>. A message shall be inserted after other messages in the queue, if any, with equal <em>mprio</em>. The value of <em>mprio</em> shall be less than <code><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga242b5035f07fb9deedd6739e26edef3f" title="Maximum message priority. ">message_queue::max_priority</a></code>.</p>
<p>If the message queue is full, the wait for sufficient room in the queue shall be terminated when the specified timeout expires.</p>
<p>The timeout shall expire after the number of time units (that is when the value of that clock equals or exceeds (now()+timeout). The resolution of the timeout shall be the resolution of the clock on which it is based.</p>
<p>Under no circumstance shall the operation fail with a timeout if there is sufficient room in the queue to add the message immediately.</p>
<p>The clock used for timeouts can be specified via the <code>clock</code> attribute. By default, the clock derived from the scheduler timer is used, and the durations are expressed in ticks.</p>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Inspired by <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/mq_timedsend.html"><code>mq_timedsend()</code></a> with <code>O_NONBLOCK</code> not set, from <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/mqueue.h.html">&lt;mqueue.h&gt;</a> (<a href="http://pubs.opengroup.org/onlinepubs/9699919799/nframe.html">IEEE Std 1003.1, 2013 Edition</a>). <br />
Differences from the standard:<ul>
<li>the timeout is not expressed as an absolute time point, but as a relative number of timer ticks (by default, the SysTick clock for CMSIS).</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Cannot be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-mqueue_8cpp_source.html#l01061">1061</a> of file <a class="el" href="os-mqueue_8cpp_source.html">os-mqueue.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a22bd67fcd9fce69ba35179d0c9be10fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a> os::rtos::message_queue::try_receive </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>nbytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga26895a3c081fd319cb199d21c4028963">priority_t</a> *&#160;</td>
          <td class="paramname"><em>mprio</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to receive a message from the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">msg</td><td>The address where to store the dequeued message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nbytes</td><td>The size of the destination buffer. Must be lower than the value used when creating the queue. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">mprio</td><td>The address where to store the message priority. The default is <code>nullptr</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="namespaceos_1_1rtos_1_1result.html#a1f5b41a48ca4ac9f7aeb3bd1c702b45aac3daa6d58a1202b112a91628d144685b" title="Function completed; no errors or events occurred. ">result::ok</a></td><td>The message was received. </td></tr>
    <tr><td class="paramname">EINVAL</td><td>A parameter is invalid or outside of a permitted range. </td></tr>
    <tr><td class="paramname">EMSGSIZE</td><td>The specified message length, nbytes, is greater than the message size attribute of the message queue. </td></tr>
    <tr><td class="paramname">ENOTRECOVERABLE</td><td>The message could not be dequeued (extension to POSIX). </td></tr>
    <tr><td class="paramname">EBADMSG</td><td>The implementation has detected a data corruption problem with the message. </td></tr>
    <tr><td class="paramname">EWOULDBLOCK</td><td>The specified message queue is empty.</td></tr>
  </table>
  </dd>
</dl>
<p>The <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a22bd67fcd9fce69ba35179d0c9be10fe" title="Try to receive a message from the queue. ">try_receive()</a></code> function shall try to receive the oldest of the highest priority message(s) from the message queue. If the size of the buffer in bytes, specified by the nbytes argument, is less than the <em>msg_size_bytes</em> attribute of the message queue, the function shall fail and return an error. Otherwise, the selected message shall be removed from the queue and copied to the buffer pointed to by the <em>msg</em> argument.</p>
<p>If the value of <em>nbytes</em> is greater than <code><a class="el" href="group__cmsis-plus-rtos-mqueue.html#gafba3f2650328e5ea1bbcfe06541936d8" title="Maximum queue size. ">message_queue::max_size</a></code>, the result is implementation-defined.</p>
<p>If the argument <em>mprio</em> is not nullptr, the priority of the selected message shall be stored in the location referenced by <em>mprio</em>.</p>
<p>If the message queue is empty, no message shall be removed from the queue, and <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a22bd67fcd9fce69ba35179d0c9be10fe" title="Try to receive a message from the queue. ">try_receive()</a></code> shall return an error.</p>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Inspired by <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/mq_receive.html"><code>mq_receive()</code></a> with <code>O_NONBLOCK</code> set, from <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/mqueue.h.html">&lt;mqueue.h&gt;</a> (<a href="http://pubs.opengroup.org/onlinepubs/9699919799/nframe.html">IEEE Std 1003.1, 2013 Edition</a>). <br />
Differences from the standard:<ul>
<li>for consistency reasons, EWOULDBLOCK is used, instead of EAGAIN</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Can be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-mqueue_8cpp_source.html#l01310">1310</a> of file <a class="el" href="os-mqueue_8cpp_source.html">os-mqueue.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a19cb3d7014f09cc497a953e9052b7b57"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a> os::rtos::message_queue::try_send </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>nbytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga26895a3c081fd319cb199d21c4028963">priority_t</a>&#160;</td>
          <td class="paramname"><em>mprio</em> = <code><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga40cf8256124467cd9c58410969808979">default_priority</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to send a message to the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>The address of the message to enqueue. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nbytes</td><td>The length of the message. Must be not higher than the value used when creating the queue. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mprio</td><td>The message priority. The default is 0. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="namespaceos_1_1rtos_1_1result.html#a1f5b41a48ca4ac9f7aeb3bd1c702b45aac3daa6d58a1202b112a91628d144685b" title="Function completed; no errors or events occurred. ">result::ok</a></td><td>The message was enqueued. </td></tr>
    <tr><td class="paramname">EWOULDBLOCK</td><td>The specified message queue is full. </td></tr>
    <tr><td class="paramname">EINVAL</td><td>A parameter is invalid or outside of a permitted range. </td></tr>
    <tr><td class="paramname">EMSGSIZE</td><td>The specified message length, nbytes, exceeds the message size attribute of the message queue. </td></tr>
    <tr><td class="paramname">ENOTRECOVERABLE</td><td>The message could not be enqueue (extension to POSIX).</td></tr>
  </table>
  </dd>
</dl>
<p>The <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a19cb3d7014f09cc497a953e9052b7b57" title="Try to send a message to the queue. ">try_send()</a></code> function shall try to add the message pointed to by the argument <em>msg</em> to the message queue. The <em>nbytes</em> argument specifies the length of the message, in bytes, pointed to by <em>msg</em>. The value of <em>nbytes</em> shall be less than or equal to the <em>msg_size_bytes</em> parameter of the message queue object, or <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a19cb3d7014f09cc497a953e9052b7b57" title="Try to send a message to the queue. ">try_send()</a></code> shall fail.</p>
<p>If the message queue is not full, <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a19cb3d7014f09cc497a953e9052b7b57" title="Try to send a message to the queue. ">try_send()</a></code> shall behave as if the message is inserted into the message queue at the position indicated by the <em>mprio</em> argument. A message with a larger numeric value of <em>mprio</em> shall be inserted before messages with lower values of <em>mprio</em>. A message shall be inserted after other messages in the queue, if any, with equal <em>mprio</em>. The value of <em>mprio</em> shall be less than <code><a class="el" href="group__cmsis-plus-rtos-mqueue.html#ga242b5035f07fb9deedd6739e26edef3f" title="Maximum message priority. ">message_queue::max_priority</a></code>.</p>
<p>If the message queue is full, the message shall not be queued and <code><a class="el" href="classos_1_1rtos_1_1message__queue.html#a19cb3d7014f09cc497a953e9052b7b57" title="Try to send a message to the queue. ">try_send()</a></code> shall return an error.</p>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Inspired by <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/mq_send.html"><code>mq_send()</code></a> with <code>O_NONBLOCK</code> set, from <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/mqueue.h.html">&lt;mqueue.h&gt;</a> (<a href="http://pubs.opengroup.org/onlinepubs/9699919799/nframe.html">IEEE Std 1003.1, 2013 Edition</a>). <br />
Differences from the standard:<ul>
<li>for consistency reasons, EWOULDBLOCK is used, instead of EAGAIN</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Can be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-mqueue_8cpp_source.html#l00977">977</a> of file <a class="el" href="os-mqueue_8cpp_source.html">os-mqueue.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/cmsis-plus/rtos/<a class="el" href="os-mqueue_8h_source.html">os-mqueue.h</a></li>
<li>src/rtos/<a class="el" href="os-mqueue_8cpp_source.html">os-mqueue.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceos.html">os</a></li><li class="navelem"><a class="el" href="namespaceos_1_1rtos.html">rtos</a></li><li class="navelem"><a class="el" href="classos_1_1rtos_1_1message__queue.html">message_queue</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
