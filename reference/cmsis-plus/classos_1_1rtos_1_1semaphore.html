<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>µOS++ IIIe / CMSIS++ Reference: os::rtos::semaphore Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-16767008-14', 'auto');
  ga('send', 'pageview');
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="$relpath/../../../.."><img alt="Logo" src="logo.png"/></a></td>
  <td id="projectalign">
   <div>
     <div id="projectname">µOS++ IIIe / CMSIS++ Reference
     &#160;<span id="projectnumber">v6.3.3</span>
     </div>
     <div id="projectmotto" class="float:right;">“Perfekt ist nicht gut genug”</div>
     </div>  
   </div>
   <div id="projectbrief">The third edition of µOS++ and CMSIS++, a proposal for the next generation CMSIS, written in C++.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classos_1_1rtos_1_1semaphore.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classos_1_1rtos_1_1semaphore-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">os::rtos::semaphore Class Reference<div class="ingroups"><a class="el" href="group__cmsis-plus-rtos.html">CMSIS++ RTOS C++ API</a> &raquo; <a class="el" href="group__cmsis-plus-rtos-semaphore.html">Semaphores</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>POSIX compliant <b>semaphore</b>.  
 <a href="classos_1_1rtos_1_1semaphore.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="os_8h_source.html">cmsis-plus/rtos/os.h</a>&gt;</code></p>

<p>Inherits <a class="el" href="classos_1_1rtos_1_1named__object.html">os::rtos::named_object</a>.</p>

<p>Inherited by <a class="el" href="classos_1_1rtos_1_1semaphore__binary.html">os::rtos::semaphore_binary</a>, and <a class="el" href="classos_1_1rtos_1_1semaphore__counting.html">os::rtos::semaphore_counting</a>.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1semaphore_1_1attributes.html">attributes</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Semaphore attributes.  <a href="classos_1_1rtos_1_1semaphore_1_1attributes.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1semaphore_1_1attributes__binary.html">attributes_binary</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Binary semaphore attributes.  <a href="classos_1_1rtos_1_1semaphore_1_1attributes__binary.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1semaphore_1_1attributes__counting.html">attributes_counting</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counting semaphore attributes.  <a href="classos_1_1rtos_1_1semaphore_1_1attributes__counting.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ad6dc71df534fae5ff113a4a010511df1"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1semaphore.html#ad6dc71df534fae5ff113a4a010511df1">count_t</a> = int16_t</td></tr>
<tr class="memdesc:ad6dc71df534fae5ff113a4a010511df1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of semaphore counter storage.  <a href="#ad6dc71df534fae5ff113a4a010511df1">More...</a><br /></td></tr>
<tr class="separator:ad6dc71df534fae5ff113a4a010511df1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Constructors &amp; Destructor</div></td></tr>
<tr class="memitem:a722459e3f83bb595777960716a15d83f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1semaphore.html#a722459e3f83bb595777960716a15d83f">semaphore</a> (const <a class="el" href="classos_1_1rtos_1_1semaphore_1_1attributes.html">attributes</a> &amp;attr=<a class="el" href="classos_1_1rtos_1_1semaphore.html#a6a97b5ca045e295b4928b4741f0d949e">initializer_binary</a>)</td></tr>
<tr class="memdesc:a722459e3f83bb595777960716a15d83f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a semaphore object.  <a href="#a722459e3f83bb595777960716a15d83f">More...</a><br /></td></tr>
<tr class="separator:a722459e3f83bb595777960716a15d83f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2716be8bd141fb73bfb338c31459d50a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1semaphore.html#a2716be8bd141fb73bfb338c31459d50a">semaphore</a> (const char *<a class="el" href="classos_1_1rtos_1_1named__object.html#aa8a2c96e84505309794a489458c8b3bc">name</a>, const <a class="el" href="classos_1_1rtos_1_1semaphore_1_1attributes.html">attributes</a> &amp;attr=<a class="el" href="classos_1_1rtos_1_1semaphore.html#a6a97b5ca045e295b4928b4741f0d949e">initializer_binary</a>)</td></tr>
<tr class="memdesc:a2716be8bd141fb73bfb338c31459d50a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a named semaphore object.  <a href="#a2716be8bd141fb73bfb338c31459d50a">More...</a><br /></td></tr>
<tr class="separator:a2716be8bd141fb73bfb338c31459d50a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dacfa0176b4286c2784352637396b8d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1semaphore.html#a4dacfa0176b4286c2784352637396b8d">~semaphore</a> ()</td></tr>
<tr class="memdesc:a4dacfa0176b4286c2784352637396b8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy the semaphore object.  <a href="#a4dacfa0176b4286c2784352637396b8d">More...</a><br /></td></tr>
<tr class="separator:a4dacfa0176b4286c2784352637396b8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Operators</div></td></tr>
<tr class="memitem:aa5a0d0614cc4e7bf6ce4bf0fb9a90cdf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1semaphore.html#aa5a0d0614cc4e7bf6ce4bf0fb9a90cdf">operator==</a> (const <a class="el" href="classos_1_1rtos_1_1semaphore.html">semaphore</a> &amp;rhs) const </td></tr>
<tr class="memdesc:aa5a0d0614cc4e7bf6ce4bf0fb9a90cdf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare semaphores.  <a href="#aa5a0d0614cc4e7bf6ce4bf0fb9a90cdf">More...</a><br /></td></tr>
<tr class="separator:aa5a0d0614cc4e7bf6ce4bf0fb9a90cdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Public Member Functions</div></td></tr>
<tr class="memitem:a466afc9e741ec96dbd1780820789758f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1semaphore.html#a466afc9e741ec96dbd1780820789758f">post</a> (void)</td></tr>
<tr class="memdesc:a466afc9e741ec96dbd1780820789758f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Post (unlock) the semaphore.  <a href="#a466afc9e741ec96dbd1780820789758f">More...</a><br /></td></tr>
<tr class="separator:a466afc9e741ec96dbd1780820789758f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25bf8989fbd11f6b4add24837a22cd29"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1semaphore.html#a25bf8989fbd11f6b4add24837a22cd29">wait</a> (void)</td></tr>
<tr class="memdesc:a25bf8989fbd11f6b4add24837a22cd29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock the semaphore, possibly waiting.  <a href="#a25bf8989fbd11f6b4add24837a22cd29">More...</a><br /></td></tr>
<tr class="separator:a25bf8989fbd11f6b4add24837a22cd29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c32154fdf817eed5f8ad58bbeacba56"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1semaphore.html#a4c32154fdf817eed5f8ad58bbeacba56">try_wait</a> (void)</td></tr>
<tr class="memdesc:a4c32154fdf817eed5f8ad58bbeacba56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to lock the semaphore.  <a href="#a4c32154fdf817eed5f8ad58bbeacba56">More...</a><br /></td></tr>
<tr class="separator:a4c32154fdf817eed5f8ad58bbeacba56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19c3e1a3b941763aa51005c767a48067"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1semaphore.html#a19c3e1a3b941763aa51005c767a48067">timed_wait</a> (<a class="el" href="classos_1_1rtos_1_1clock.html#a149d8b5cea55224ef5cfede8a81df04c">clock::duration_t</a> timeout)</td></tr>
<tr class="memdesc:a19c3e1a3b941763aa51005c767a48067"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timed wait to lock the semaphore.  <a href="#a19c3e1a3b941763aa51005c767a48067">More...</a><br /></td></tr>
<tr class="separator:a19c3e1a3b941763aa51005c767a48067"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1b0aec87113d2856a3641ae246320f8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classos_1_1rtos_1_1semaphore.html#ad6dc71df534fae5ff113a4a010511df1">count_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1semaphore.html#ab1b0aec87113d2856a3641ae246320f8">value</a> (void) const </td></tr>
<tr class="memdesc:ab1b0aec87113d2856a3641ae246320f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the semaphore count value.  <a href="#ab1b0aec87113d2856a3641ae246320f8">More...</a><br /></td></tr>
<tr class="separator:ab1b0aec87113d2856a3641ae246320f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bf4a8cefda24b57821c9cd322b33b19"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1semaphore.html#a3bf4a8cefda24b57821c9cd322b33b19">reset</a> (void)</td></tr>
<tr class="memdesc:a3bf4a8cefda24b57821c9cd322b33b19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the semaphore.  <a href="#a3bf4a8cefda24b57821c9cd322b33b19">More...</a><br /></td></tr>
<tr class="separator:a3bf4a8cefda24b57821c9cd322b33b19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a332c9dcea56cfaf9321c778059d00b5f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classos_1_1rtos_1_1semaphore.html#ad6dc71df534fae5ff113a4a010511df1">count_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1semaphore.html#a332c9dcea56cfaf9321c778059d00b5f">initial_value</a> (void) const </td></tr>
<tr class="memdesc:a332c9dcea56cfaf9321c778059d00b5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the semaphore initial count value.  <a href="#a332c9dcea56cfaf9321c778059d00b5f">More...</a><br /></td></tr>
<tr class="separator:a332c9dcea56cfaf9321c778059d00b5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12882c8f1b9dac665087b6f88428a1b8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classos_1_1rtos_1_1semaphore.html#ad6dc71df534fae5ff113a4a010511df1">count_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1semaphore.html#a12882c8f1b9dac665087b6f88428a1b8">max_value</a> (void) const </td></tr>
<tr class="memdesc:a12882c8f1b9dac665087b6f88428a1b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the semaphore maximum count value.  <a href="#a12882c8f1b9dac665087b6f88428a1b8">More...</a><br /></td></tr>
<tr class="separator:a12882c8f1b9dac665087b6f88428a1b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Public Member Functions</div></td></tr>
<tr class="memitem:aa8a2c96e84505309794a489458c8b3bc"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1named__object.html#aa8a2c96e84505309794a489458c8b3bc">name</a> (void) const </td></tr>
<tr class="memdesc:aa8a2c96e84505309794a489458c8b3bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get object name.  <a href="#aa8a2c96e84505309794a489458c8b3bc">More...</a><br /></td></tr>
<tr class="separator:aa8a2c96e84505309794a489458c8b3bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a6a97b5ca045e295b4928b4741f0d949e"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="classos_1_1rtos_1_1semaphore_1_1attributes__binary.html">attributes_binary</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1semaphore.html#a6a97b5ca045e295b4928b4741f0d949e">initializer_binary</a> { 0 }</td></tr>
<tr class="memdesc:a6a97b5ca045e295b4928b4741f0d949e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default binary semaphore initialiser.  <a href="#a6a97b5ca045e295b4928b4741f0d949e">More...</a><br /></td></tr>
<tr class="separator:a6a97b5ca045e295b4928b4741f0d949e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52960bb03444802faaff6fb110156fba"><td class="memItemLeft" align="right" valign="top">static constexpr <a class="el" href="classos_1_1rtos_1_1semaphore.html#ad6dc71df534fae5ff113a4a010511df1">count_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classos_1_1rtos_1_1semaphore.html#a52960bb03444802faaff6fb110156fba">max_count_value</a> = 0x7FFF</td></tr>
<tr class="memdesc:a52960bb03444802faaff6fb110156fba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum semaphore value.  <a href="#a52960bb03444802faaff6fb110156fba">More...</a><br /></td></tr>
<tr class="separator:a52960bb03444802faaff6fb110156fba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>POSIX compliant <b>semaphore</b>. </p>
<p>Semaphores allow threads and interrupts to synchronise their actions.</p>
<p>A useful way to think of a semaphore as used in the real-world systems is as a record of how many units of a particular resource are available, coupled with operations to safely (i.e., without race conditions) adjust that record as units are required or become free, and, if necessary, wait until a unit of the resource becomes available. Semaphores are a useful tool in the prevention of race conditions; however, their use is by no means a guarantee that a program is free from these problems. Semaphores which allow an arbitrary resource count are called counting semaphores, while semaphores which are restricted to the values 0 and 1 (or locked/unlocked, unavailable/available) are called binary semaphores.</p>
<p>Semaphores should generally be used to synchronise threads with events occurring on interrupts.</p>
<p>For inter-thread synchronisation, to avoid cases of priority inversion, more suitable are mutexes.</p>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Inspired by <code>sem_t</code> from <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/semaphore.h.html"><code>&lt;semaphore.h&gt;</code></a> (<a href="http://pubs.opengroup.org/onlinepubs/9699919799/nframe.html">IEEE Std 1003.1, 2013 Edition</a>). </dd></dl>

<p>Definition at line <a class="el" href="os-semaphore_8h_source.html#l00058">58</a> of file <a class="el" href="os-semaphore_8h_source.html">os-semaphore.h</a>.</p>
</div><h2 class="groupheader">Types</h2>
<a class="anchor" id="ad6dc71df534fae5ff113a4a010511df1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classos_1_1rtos_1_1semaphore.html#ad6dc71df534fae5ff113a4a010511df1">os::rtos::semaphore::count_t</a> =  int16_t</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of semaphore counter storage. </p>
<p>A numeric value enough to hold the semaphore counter, usually a 16-bits signed value. </p>

<p>Definition at line <a class="el" href="os-semaphore_8h_source.html#l00068">68</a> of file <a class="el" href="os-semaphore_8h_source.html">os-semaphore.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a722459e3f83bb595777960716a15d83f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">os::rtos::semaphore::semaphore </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classos_1_1rtos_1_1semaphore_1_1attributes.html">attributes</a> &amp;&#160;</td>
          <td class="paramname"><em>attr</em> = <code><a class="el" href="classos_1_1rtos_1_1semaphore.html#a6a97b5ca045e295b4928b4741f0d949e">initializer_binary</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a semaphore object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">attr</td><td>Reference to attributes.</td></tr>
  </table>
  </dd>
</dl>
<p>This constructor shall initialise a generic semaphore object with attributes referenced by <em>attr</em>. If the attributes specified by <em>attr</em> are modified later, the semaphore attributes shall not be affected. Upon successful initialisation, the state of the semaphore object shall become initialised.</p>
<p>Only the semaphore object itself may be used for performing synchronisation. It is not allowed to make copies of semaphore objects.</p>
<p>In cases where default semaphore attributes are appropriate, the variable <code><a class="el" href="classos_1_1rtos_1_1semaphore.html#a6a97b5ca045e295b4928b4741f0d949e" title="Default binary semaphore initialiser. ">semaphore::initializer_binary</a></code> can be used to initialise semaphores. The effect shall be equivalent to creating a semaphore object with the default constructor.</p>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Inspired by <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_init.html"><code>sem_init()</code></a> from <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/semaphore.h.html"><code>&lt;semaphore.h&gt;</code></a> (<a href="http://pubs.opengroup.org/onlinepubs/9699919799/nframe.html">IEEE Std 1003.1, 2013 Edition</a>).</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Cannot be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-semaphore_8h_source.html#l00731">731</a> of file <a class="el" href="os-semaphore_8h_source.html">os-semaphore.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2716be8bd141fb73bfb338c31459d50a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">os::rtos::semaphore::semaphore </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classos_1_1rtos_1_1semaphore_1_1attributes.html">attributes</a> &amp;&#160;</td>
          <td class="paramname"><em>attr</em> = <code><a class="el" href="classos_1_1rtos_1_1semaphore.html#a6a97b5ca045e295b4928b4741f0d949e">initializer_binary</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a named semaphore object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>Pointer to name. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attr</td><td>Reference to attributes.</td></tr>
  </table>
  </dd>
</dl>
<p>This constructor shall initialise a named generic semaphore object with attributes referenced by <em>attr</em>. If the attributes specified by <em>attr</em> are modified later, the semaphore attributes shall not be affected. Upon successful initialisation, the state of the semaphore object shall become initialised.</p>
<p>Only the semaphore object itself may be used for performing synchronisation. It is not allowed to make copies of semaphore objects.</p>
<p>In cases where default semaphore attributes are appropriate, the variable <code><a class="el" href="classos_1_1rtos_1_1semaphore.html#a6a97b5ca045e295b4928b4741f0d949e" title="Default binary semaphore initialiser. ">semaphore::initializer_binary</a></code> can be used to initialise semaphores. The effect shall be equivalent to creating a semaphore object with the default constructor.</p>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Inspired by <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_init.html"><code>sem_init()</code></a> from <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/semaphore.h.html"><code>&lt;semaphore.h&gt;</code></a> (<a href="http://pubs.opengroup.org/onlinepubs/9699919799/nframe.html">IEEE Std 1003.1, 2013 Edition</a>).</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Cannot be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-semaphore_8cpp_source.html#l00154">154</a> of file <a class="el" href="os-semaphore_8cpp_source.html">os-semaphore.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a4dacfa0176b4286c2784352637396b8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">os::rtos::semaphore::~semaphore </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy the semaphore object. </p>
<p>This destructor shall destroy the semaphore object; the object becomes, in effect, uninitialised. An implementation may cause the destructor to set the object to an invalid value.</p>
<p>It is safe to destroy an initialised semaphore upon which no threads are currently blocked. The effect of destroying a semaphore upon which other threads are currently blocked is undefined.</p>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Inspired by <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_destroy.html"><code>sem_destroy()</code></a> from <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/semaphore.h.html"><code>&lt;semaphore.h&gt;</code></a> (<a href="http://pubs.opengroup.org/onlinepubs/9699919799/nframe.html">IEEE Std 1003.1, 2013 Edition</a>).</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Cannot be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-semaphore_8cpp_source.html#l00224">224</a> of file <a class="el" href="os-semaphore_8cpp_source.html">os-semaphore.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a332c9dcea56cfaf9321c778059d00b5f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classos_1_1rtos_1_1semaphore.html#ad6dc71df534fae5ff113a4a010511df1">semaphore::count_t</a> os::rtos::semaphore::initial_value </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the semaphore initial count value. </p>
<dl class="section user"><dt>Parameters</dt><dd>None </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The numeric value set from attributes.</dd></dl>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Extension to standard, no POSIX similar functionality identified.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Can be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-semaphore_8h_source.html#l00756">756</a> of file <a class="el" href="os-semaphore_8h_source.html">os-semaphore.h</a>.</p>

</div>
</div>
<a class="anchor" id="a12882c8f1b9dac665087b6f88428a1b8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classos_1_1rtos_1_1semaphore.html#ad6dc71df534fae5ff113a4a010511df1">semaphore::count_t</a> os::rtos::semaphore::max_value </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the semaphore maximum count value. </p>
<dl class="section user"><dt>Parameters</dt><dd>None </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The numeric value set from attributes.</dd></dl>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Extension to standard, no POSIX similar functionality identified.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Can be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-semaphore_8h_source.html#l00769">769</a> of file <a class="el" href="os-semaphore_8h_source.html">os-semaphore.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa8a2c96e84505309794a489458c8b3bc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char * os::rtos::named_object::name </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get object name. </p>
<dl class="section user"><dt>Parameters</dt><dd>None. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>A null terminated string.</dd></dl>
<p>All objects return a non-null string; anonymous objects return <code>"-"</code>.</p>
<dl class="section note"><dt>Note</dt><dd>Can be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-decls_8h_source.html#l00539">539</a> of file <a class="el" href="os-decls_8h_source.html">os-decls.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa5a0d0614cc4e7bf6ce4bf0fb9a90cdf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool os::rtos::semaphore::operator== </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classos_1_1rtos_1_1semaphore.html">semaphore</a> &amp;&#160;</td>
          <td class="paramname"><em>rhs</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compare semaphores. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>The given semaphore is the same as this semaphore. </td></tr>
    <tr><td class="paramname">false</td><td>The semaphores are different.</td></tr>
  </table>
  </dd>
</dl>
<p>Identical semaphores should have the same memory address. </p>

<p>Definition at line <a class="el" href="os-semaphore_8h_source.html#l00743">743</a> of file <a class="el" href="os-semaphore_8h_source.html">os-semaphore.h</a>.</p>

</div>
</div>
<a class="anchor" id="a466afc9e741ec96dbd1780820789758f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a> os::rtos::semaphore::post </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Post (unlock) the semaphore. </p>
<dl class="section user"><dt>Parameters</dt><dd>None </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="namespaceos_1_1rtos_1_1result.html#a1f5b41a48ca4ac9f7aeb3bd1c702b45aac3daa6d58a1202b112a91628d144685b" title="Function completed; no errors or events occurred. ">result::ok</a></td><td>The semaphore was posted. </td></tr>
    <tr><td class="paramname">EAGAIN</td><td>The maximum count value was exceeded. </td></tr>
    <tr><td class="paramname">ENOTRECOVERABLE</td><td>The semaphore could not be posted (extension to POSIX).</td></tr>
  </table>
  </dd>
</dl>
<p>Perform a post operation on the semaphore, informing the waiting consumers that one more resource is available. The semaphore count is incremented, up to max_value.</p>
<p>If the semaphore count resulting from this operation is positive, then no threads were blocked waiting for the semaphore to become unlocked.</p>
<p>If the count of the semaphore resulting from this operation is zero, then one of the threads blocked waiting for the semaphore shall be allowed to return successfully from its call to <code><a class="el" href="classos_1_1rtos_1_1semaphore.html#a25bf8989fbd11f6b4add24837a22cd29" title="Lock the semaphore, possibly waiting. ">wait()</a></code>.</p>
<p>If the Process Scheduling option is supported, the thread to be unblocked shall be chosen in a manner appropriate to the scheduling policies and parameters in effect for the blocked threads. In the case of the schedulers SCHED_FIFO and SCHED_RR, the highest priority waiting thread shall be unblocked, and if there is more than one highest priority thread blocked waiting for the semaphore, then the highest priority thread that has been waiting the longest shall be unblocked. If the Process Scheduling option is not defined, the choice of a thread to unblock is unspecified. If the scheduling policy is SCHED_SPORADIC, the semantics are as per SCHED_FIFO.</p>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Inspired by <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_post.html"><code>sem_post()</code></a> from <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/semaphore.h.html"><code>&lt;semaphore.h&gt;</code></a> (<a href="http://pubs.opengroup.org/onlinepubs/9699919799/nframe.html">IEEE Std 1003.1, 2013 Edition</a>).</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Can be invoked from Interrupt Service Routines.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Applications using these functions may be subject to priority inversion. </dd></dl>

<p>Definition at line <a class="el" href="os-semaphore_8cpp_source.html#l00326">326</a> of file <a class="el" href="os-semaphore_8cpp_source.html">os-semaphore.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a3bf4a8cefda24b57821c9cd322b33b19"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a> os::rtos::semaphore::reset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the semaphore. </p>
<dl class="section user"><dt>Parameters</dt><dd>None </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="namespaceos_1_1rtos_1_1result.html#a1f5b41a48ca4ac9f7aeb3bd1c702b45aac3daa6d58a1202b112a91628d144685b" title="Function completed; no errors or events occurred. ">result::ok</a></td><td>The semaphore was reset. </td></tr>
    <tr><td class="paramname">EPERM</td><td>Cannot be invoked from an Interrupt Service Routines.</td></tr>
  </table>
  </dd>
</dl>
<p>Reset the counter to the initial value.</p>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Extension to standard, no POSIX similar functionality identified.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Cannot be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-semaphore_8cpp_source.html#l00672">672</a> of file <a class="el" href="os-semaphore_8cpp_source.html">os-semaphore.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a19c3e1a3b941763aa51005c767a48067"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a> os::rtos::semaphore::timed_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classos_1_1rtos_1_1clock.html#a149d8b5cea55224ef5cfede8a81df04c">clock::duration_t</a>&#160;</td>
          <td class="paramname"><em>timeout</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Timed wait to lock the semaphore. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>Timeout to wait. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="namespaceos_1_1rtos_1_1result.html#a1f5b41a48ca4ac9f7aeb3bd1c702b45aac3daa6d58a1202b112a91628d144685b" title="Function completed; no errors or events occurred. ">result::ok</a></td><td>The calling process successfully performed the semaphore lock operation. </td></tr>
    <tr><td class="paramname">EPERM</td><td>Cannot be invoked from an Interrupt Service Routines. </td></tr>
    <tr><td class="paramname">EINVAL</td><td>Invalid timeout (POSIX limits the timeout to 1000 million ns) </td></tr>
    <tr><td class="paramname">ETIMEDOUT</td><td>The semaphore could not be locked before the specified timeout expired. </td></tr>
    <tr><td class="paramname">ENOTRECOVERABLE</td><td>Semaphore wait failed (extension to POSIX). </td></tr>
    <tr><td class="paramname">EDEADLK</td><td>A deadlock condition was detected. </td></tr>
    <tr><td class="paramname">EINTR</td><td>The operation was interrupted.</td></tr>
  </table>
  </dd>
</dl>
<p>Try to perform a lock operation; if the semaphore cannot be locked without waiting for another process or thread to unlock the semaphore by performing a <code><a class="el" href="classos_1_1rtos_1_1semaphore.html#a466afc9e741ec96dbd1780820789758f" title="Post (unlock) the semaphore. ">post()</a></code> function, this wait shall be terminated when the specified timeout expires.</p>
<p>The timeout shall expire after the number of time units (that is when the value of that clock equals or exceeds (now()+duration). The resolution of the timeout shall be the resolution of the clock on which it is based.</p>
<p>Under no circumstance shall the function fail with a timeout if the semaphore can be locked immediately. The validity of the timeout need not be checked if the semaphore can be locked immediately.</p>
<p>The clock used for timeouts can be specified via the <code>clock</code> attribute. By default, the clock derived from the scheduler timer is used, and the durations are expressed in ticks.</p>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Inspired by <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_timedwait.html"><code>sem_timedwait()</code></a> from <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/semaphore.h.html"><code>&lt;semaphore.h&gt;</code></a> (<a href="http://pubs.opengroup.org/onlinepubs/9699919799/nframe.html">IEEE Std 1003.1, 2013 Edition</a>). <br />
Differences from the standard:<ul>
<li>the timeout is not expressed as an absolute time point, but as a relative number of timer ticks (by default, the SysTick clock for CMSIS).</li>
<li>for consistency reasons, EWOULDBLOCK is used, instead of EAGAIN</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Cannot be invoked from Interrupt Service Routines.</dd>
<dd>
Applications using these functions may be subject to priority inversion. </dd></dl>

<p>Definition at line <a class="el" href="os-semaphore_8cpp_source.html#l00549">549</a> of file <a class="el" href="os-semaphore_8cpp_source.html">os-semaphore.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a4c32154fdf817eed5f8ad58bbeacba56"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a> os::rtos::semaphore::try_wait </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to lock the semaphore. </p>
<dl class="section user"><dt>Parameters</dt><dd>None </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="namespaceos_1_1rtos_1_1result.html#a1f5b41a48ca4ac9f7aeb3bd1c702b45aac3daa6d58a1202b112a91628d144685b" title="Function completed; no errors or events occurred. ">result::ok</a></td><td>The calling process successfully performed the semaphore lock operation. </td></tr>
    <tr><td class="paramname">EPERM</td><td>Cannot be invoked from an Interrupt Service Routines. </td></tr>
    <tr><td class="paramname">EWOULDBLOCK</td><td>The semaphore was already locked. </td></tr>
    <tr><td class="paramname">ENOTRECOVERABLE</td><td>Semaphore wait failed (extension to POSIX). </td></tr>
    <tr><td class="paramname">EDEADLK</td><td>A deadlock condition was detected. </td></tr>
    <tr><td class="paramname">EINTR</td><td>The operation was interrupted.</td></tr>
  </table>
  </dd>
</dl>
<p>Tries to perform a lock operation only if the semaphore is currently not locked; that is, if the semaphore value is currently positive it decrements it and returns success. Otherwise, it shall not lock the semaphore.</p>
<p>Upon successful return, the state of the semaphore shall be locked and shall remain locked until the <code><a class="el" href="classos_1_1rtos_1_1semaphore.html#a466afc9e741ec96dbd1780820789758f" title="Post (unlock) the semaphore. ">post()</a></code> function is executed and returns successfully.</p>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Inspired by <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_trywait.html"><code>sem_trywait()</code></a> from <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/semaphore.h.html"><code>&lt;semaphore.h&gt;</code></a> (<a href="http://pubs.opengroup.org/onlinepubs/9699919799/nframe.html">IEEE Std 1003.1, 2013 Edition</a>).</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Can be invoked from Interrupt Service Routines.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Applications using these functions may be subject to priority inversion. </dd></dl>

<p>Definition at line <a class="el" href="os-semaphore_8cpp_source.html#l00484">484</a> of file <a class="el" href="os-semaphore_8cpp_source.html">os-semaphore.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab1b0aec87113d2856a3641ae246320f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classos_1_1rtos_1_1semaphore.html#ad6dc71df534fae5ff113a4a010511df1">semaphore::count_t</a> os::rtos::semaphore::value </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the semaphore count value. </p>
<dl class="section user"><dt>Parameters</dt><dd>None </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The semaphore count value.</dd></dl>
<p>The <code><a class="el" href="classos_1_1rtos_1_1semaphore.html#ab1b0aec87113d2856a3641ae246320f8" title="Get the semaphore count value. ">value()</a></code> function shall return the value of the semaphore without affecting the state of the semaphore. The value represents an actual semaphore value that occurred at some unspecified time during the call, but it need not be the actual value of the semaphore when it is returned to the calling process. This value reflects the number of available resources.</p>
<p>If the semaphore is locked, then the returned value shall either be set to zero or to a negative number whose absolute value represents the number of processes waiting for the semaphore at some unspecified time during the call.</p>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Inspired by <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_getvalue.html"><code>sem_getvalue()</code></a> from <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/semaphore.h.html"><code>&lt;semaphore.h&gt;</code></a> (<a href="http://pubs.opengroup.org/onlinepubs/9699919799/nframe.html">IEEE Std 1003.1, 2013 Edition</a>).</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Can be invoked from Interrupt Service Routines. </dd></dl>

<p>Definition at line <a class="el" href="os-semaphore_8cpp_source.html#l00653">653</a> of file <a class="el" href="os-semaphore_8cpp_source.html">os-semaphore.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a25bf8989fbd11f6b4add24837a22cd29"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceos_1_1rtos.html#a54633089ccffe9e56ce1137ebe57776d">result_t</a> os::rtos::semaphore::wait </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lock the semaphore, possibly waiting. </p>
<dl class="section user"><dt>Parameters</dt><dd>None </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="namespaceos_1_1rtos_1_1result.html#a1f5b41a48ca4ac9f7aeb3bd1c702b45aac3daa6d58a1202b112a91628d144685b" title="Function completed; no errors or events occurred. ">result::ok</a></td><td>The calling process successfully performed the semaphore lock operation. </td></tr>
    <tr><td class="paramname">EPERM</td><td>Cannot be invoked from an Interrupt Service Routines. </td></tr>
    <tr><td class="paramname">ENOTRECOVERABLE</td><td>Semaphore wait failed (extension to POSIX). </td></tr>
    <tr><td class="paramname">EDEADLK</td><td>A deadlock condition was detected. </td></tr>
    <tr><td class="paramname">EINTR</td><td>The operation was interrupted.</td></tr>
  </table>
  </dd>
</dl>
<p>Perform a lock operation on the semaphore.</p>
<p>If the current value is positive, it is decremented, and the call returns immediately</p>
<p>If the semaphore value is currently zero, then the calling thread shall not return from the call to <a class="el" href="classos_1_1rtos_1_1semaphore.html#a25bf8989fbd11f6b4add24837a22cd29" title="Lock the semaphore, possibly waiting. ">wait()</a> until it either locks the semaphore or the call is interrupted by a signal.</p>
<p>Upon successful return, the state of the semaphore shall be locked and shall remain locked until the <code><a class="el" href="classos_1_1rtos_1_1semaphore.html#a466afc9e741ec96dbd1780820789758f" title="Post (unlock) the semaphore. ">post()</a></code> function is executed and returns successfully.</p>
<p>The function is interruptible by the delivery of an external event (signal, thread cancel, etc).</p>
<dl class="section user"><dt>POSIX compatibility</dt><dd>Inspired by <a href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_wait.html"><code>sem_wait()</code></a> from <a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/semaphore.h.html"><code>&lt;semaphore.h&gt;</code></a> (<a href="http://pubs.opengroup.org/onlinepubs/9699919799/nframe.html">IEEE Std 1003.1, 2013 Edition</a>).</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Cannot be invoked from Interrupt Service Routines.</dd>
<dd>
Applications using these functions may be subject to priority inversion. </dd></dl>

<p>Definition at line <a class="el" href="os-semaphore_8cpp_source.html#l00396">396</a> of file <a class="el" href="os-semaphore_8cpp_source.html">os-semaphore.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a6a97b5ca045e295b4928b4741f0d949e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classos_1_1rtos_1_1semaphore_1_1attributes__binary.html">semaphore::attributes_binary</a> os::rtos::semaphore::initializer_binary { 0 }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default binary semaphore initialiser. </p>
<p>This variable is used by the default constructor. </p>

<p>Definition at line <a class="el" href="os-semaphore_8h_source.html#l00208">208</a> of file <a class="el" href="os-semaphore_8h_source.html">os-semaphore.h</a>.</p>

</div>
</div>
<a class="anchor" id="a52960bb03444802faaff6fb110156fba"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr <a class="el" href="classos_1_1rtos_1_1semaphore.html#ad6dc71df534fae5ff113a4a010511df1">count_t</a> os::rtos::semaphore::max_count_value = 0x7FFF</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Maximum semaphore value. </p>
<p>Used to validate the semaphore initial count and max count. </p>

<p>Definition at line <a class="el" href="os-semaphore_8h_source.html#l00075">75</a> of file <a class="el" href="os-semaphore_8h_source.html">os-semaphore.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/cmsis-plus/rtos/<a class="el" href="os-semaphore_8h_source.html">os-semaphore.h</a></li>
<li>src/rtos/<a class="el" href="os-semaphore_8cpp_source.html">os-semaphore.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceos.html">os</a></li><li class="navelem"><a class="el" href="namespaceos_1_1rtos.html">rtos</a></li><li class="navelem"><a class="el" href="classos_1_1rtos_1_1semaphore.html">semaphore</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
