<!DOCTYPE html>
<html lang="en">


<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>Class OSDeviceCharacterBuffered</title>
  <meta name="description" content="The third edition of µOS++, a POSIX inspired open source framework, written in C++.">

  <meta property="og:title" content="Class OSDeviceCharacterBuffered">
  <meta property="og:site_name" content="µOS++ IIIe">

  <link rel="alternate" type="application/rss+xml" title="µOS++ IIIe" href="/feed.xml">


  <meta property="article:published_time" content="2011-03-05">





  <meta name="google-site-verification" content="NT_y3tqI_8mrd8gYA_FDWHT2-tkJExOC6KBkSnyZx6c">

  <link href="https://fonts.googleapis.com/css?family=Architects+Daughter" rel="stylesheet" type="text/css">

  <link rel="stylesheet" type="text/css" href="/stylesheets/screen.css?201807041643" media="screen">
  <link rel="stylesheet" type="text/css" href="/stylesheets/font-awesome.css?201807041643" media="screen">
  <link rel="stylesheet" type="text/css" href="/stylesheets/print.css?201807041643" media="print">

  <link rel="canonical" href="/micro-os-plus/i/Class_OSDeviceCharacterBuffered/">



  <!--[if lt IE 9]>
  <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-16767008-14', 'auto');
  ga('send', 'pageview');

</script>



</head>


<body>

<div class="container">

  <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.4";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

  <script>window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));</script>

  <div class="site-header">
  <table style="width:100%">
    <tr>
      <td>
        <a href="/">
          <img alt="Icon" class="site-icon" src="/assets/icons/wall-e-icon.png" height="100" width="100">
      </a>
      </td>
      <td>
        <table class="site-title" style="width:100%">
          <tr>
            <td class="site-title">
              <a href="/">µOS++ IIIe</a>
            </td>
            <td class="site-motto" align="right">
              “Perfekt ist nicht gut genug”
            </td>
          </tr>
          <tr>
            <td class="site-description" colspan="2">
              The third edition of µOS++, a POSIX inspired open source framework, written in C++.
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</div>


</div>

<div class="container">

  <div class="wrapper">
    <div class="site-body">

      <div class="site-sidebar">


  <div class="custom-sidebar">
    <div class="boxed-group-inner">
      <h4 id="news"><a href="/blog/">News</a></h4>

<ul>
  <li><a href="/blog/2018/11/19/micro-os-plus-v6-3-15-released/">µOS++ IIIe v6.3.15 released</a></li>
  <li><a href="/blog/2018/07/04/micro-os-plus-v6-3-14-released/">µOS++ IIIe v6.3.14 released</a></li>
  <li><a href="/blog/2017/08/26/micro-os-plus-v6-3-13-released/">µOS++ IIIe v6.3.13 released</a></li>
  <li><a href="/blog/2017/01/02/micro-os-plus-v6-3-11-released/">µOS++ IIIe v6.3.11 released</a></li>
</ul>


    </div>
  </div>


  <div class="custom-sidebar">
    <div class="boxed-group-inner">
      
      <h4 id="home"><a href="/">Home</a></h4>

<h4 id="µos-iiie">µOS++ IIIe</h4>

<ul>
  <li><a href="/micro-os-plus/">Overview</a></li>
</ul>

<h4 id="apis">APIs</h4>

<ul>
  <li><a href="/cmsis-plus/">Overview</a></li>
  <li><a href="/cmsis-plus/rtos/">RTOS API</a></li>
</ul>

<h4 id="xpacksxcdl">xPacks/XCDL</h4>

<ul>
  <li><a href="/xpacks/">Overview</a></li>
</ul>

<h4 id="documentation">Documentation</h4>

<ul>
  <li>
<a href="/user-manual/">User’s <strong>manual</strong></a>
    <ul>
      <li><a href="/user-manual/getting-started/">Getting started</a></li>
      <li><a href="/user-manual/basic-concepts/">Basic concepts</a></li>
      <li><a href="/user-manual/features/">Features</a></li>
      <li><a href="/user-manual/threads/">Threads</a></li>
      <li><a href="/user-manual/thread-event-flags/">Thread event flags</a></li>
      <li><a href="/user-manual/semaphores/">Semaphores</a></li>
      <li><a href="/user-manual/event-flags/">Event flags</a></li>
      <li>Mutexes</li>
      <li>Condition variables</li>
      <li>Message queues</li>
      <li>Memory pools</li>
      <li>Software timers</li>
      <li>Clocks</li>
    </ul>
  </li>
  <li><a href="/reference/cmsis-plus/">µOS++ <strong>reference</strong></a></li>
</ul>

<h4 id="developer">Developer</h4>

<ul>
  <li><a href="/develop/">Overview</a></li>
  <li><a href="/reference/cmsis-plus/md_doxygen_pages_change-log.html">Change log</a></li>
  <li><a href="/develop/coding-style/">C++ coding style</a></li>
  <li><a href="/develop/naming-conventions/">Naming conventions</a></li>
  <li><a href="/develop/references/">Links &amp; references</a></li>
</ul>

<h4 id="support">Support</h4>

<ul>
  <li><a href="/support/">Overview</a></li>
  <li><a href="/support/known-issues/">Known issues</a></li>
  <li><a href="/support/faq/">FAQ</a></li>
  <li><a href="/support/forum/">Forum</a></li>
  <li><a href="https://github.com/micro-os-plus/micro-os-plus-iii/issues/">Report µOS++ IIIe issues</a></li>
</ul>

<h4 id="latest-articles">Latest Articles</h4>

<ul>
  <li><a href="/articles/arm-com-2016-06-24/">CMSIS++ RTOS: fully functional reference implementation</a></li>
  <li><a href="/articles/arm-com-2016-03-11/">CMSIS++: a proposal for a future CMSIS, written in C++</a></li>
</ul>

<h4 id="license">License</h4>

<ul>
  <li><a href="https://opensource.org/licenses/MIT">MIT</a></li>
</ul>

<h4 id="about"><a href="/about/">About</a></h4>

    </div>
  </div>

  <div class="site-theme">
    This site uses the <a href="https://github.com/ilg-ul/github-jekyll-theme">GitHub Wiki-like</a> theme by <a href="https://github.com/ilg-ul">Liviu Ionescu</a>.
  </div>

</div>


      <div class="site-content">

        
<h1 class="page-title">Class OSDeviceCharacterBuffered - DEPRECATED</h1>
<table id="last-modified">
  <tr>
    <td id="last-modified">Page date Sat Mar  5 00:22:16 2011 .</td>
    <td id="improve" align="right"><a id="improve" href="https://github.com/micro-os-plus/web-jekyll/edit/master/pages/micro-os-plus/i/Class_OSDeviceCharacterBuffered.md"><i class="fa fa-pencil"></i>  Improve this page</a></td>
  </tr>
</table>

<div id="toc-container">
<table class="toc" id="toc">
<tbody>
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toc_level-1 toc_section-1">
<a href="#osdevicecharacterbufferedunsigned-char-prxbuf-unsigned-short-rxbufsize-unsigned-short-rxhwm-unsigned-short-rxlwm-unsigned-char-ptxbuf-unsigned-short-txbufsize-unsigned-short-txhwm-unsigned-short-txlwm"><span class="tocnumber">1</span> <span class="toctext">OSDeviceCharacterBuffered(unsigned char *pRxBuf, unsigned short rxBufSize, unsigned short rxHWM, unsigned short rxLWM, unsigned char *pTxBuf, unsigned short txBufSize, unsigned short txHWM, unsigned short txLWM)</span></a>
</li>
<li class="toc_level-1 toc_section-2">
<a href="#osdevicecharacterbufferedunsigned-char-prxbuf-unsigned-short-rxbufsize-unsigned-char-ptxbuf-unsigned-short-txbufsize"><span class="tocnumber">2</span> <span class="toctext">OSDeviceCharacterBuffered(unsigned char *pRxBuf, unsigned short rxBufSize, unsigned char *pTxBuf, unsigned short txBufSize)</span></a>
</li>
<li class="toc_level-1 toc_section-3">
<a href="#virtual-osreturn_t-implopenvoid"><span class="tocnumber">3</span> <span class="toctext">virtual OSReturn_t implOpen(void)</span></a>
</li>
<li class="toc_level-1 toc_section-4">
<a href="#virtual-osreturn_t-implclosevoid"><span class="tocnumber">4</span> <span class="toctext">virtual OSReturn_t implClose(void)</span></a>
</li>
<li class="toc_level-1 toc_section-5">
<a href="#virtual-bool-implisconnectedvoid-const"><span class="tocnumber">5</span> <span class="toctext">virtual bool implIsConnected(void) const</span></a>
</li>
<li class="toc_level-1 toc_section-6">
<a href="#virtual-bool-implcanreadvoid"><span class="tocnumber">6</span> <span class="toctext">virtual bool implCanRead(void)</span></a>
</li>
<li class="toc_level-1 toc_section-7">
<a href="#virtual-int-implavailablereadvoid"><span class="tocnumber">7</span> <span class="toctext">virtual int implAvailableRead(void)</span></a>
</li>
<li class="toc_level-1 toc_section-8">
<a href="#virtual-int-implreadbytevoid"><span class="tocnumber">8</span> <span class="toctext">virtual int implReadByte(void)</span></a>
</li>
<li class="toc_level-1 toc_section-9">
<a href="#virtual-bool-implcanwritevoid"><span class="tocnumber">9</span> <span class="toctext">virtual bool implCanWrite(void)</span></a>
</li>
<li class="toc_level-1 toc_section-10">
<a href="#virtual-int-implwritebyteunsigned-char-b"><span class="tocnumber">10</span> <span class="toctext">virtual int implWriteByte(unsigned char b)</span></a>
</li>
<li class="toc_level-1 toc_section-11">
<a href="#virtual-int-implflushvoid"><span class="tocnumber">11</span> <span class="toctext">virtual int implFlush(void)</span></a>
</li>
<li class="toc_level-1 toc_section-12">
<a href="#void-interruptrxserviceroutinevoid"><span class="tocnumber">12</span> <span class="toctext">void interruptRxServiceRoutine(void)</span></a>
</li>
<li class="toc_level-1 toc_section-13">
<a href="#void-interrupttxserviceroutinevoid"><span class="tocnumber">13</span> <span class="toctext">void interruptTxServiceRoutine(void)</span></a>
</li>
<li class="toc_level-1 toc_section-14">
<a href="#virtual-int-implportdisablevoid"><span class="tocnumber">14</span> <span class="toctext">virtual int implPortDisable(void)</span></a>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<h1 id="classes-hierarchy">Classes hierarchy</h1>

<ul>
  <li>streambuf
    <ul>
      <li>OSDeviceCharacter
        <ul>
          <li>OSDeviceCharacterBuffered</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>The OSDeviceCharacter class may or may not derive from streambuf, based on configuration variables.</p>

<h1 id="children-classes">Children classes</h1>

<ul>
  <li>OSDeviceCharacterBufferedUsart0</li>
  <li>OSDeviceCharacterBufferedUsart1</li>
</ul>

<h1 id="overview">Overview</h1>

<p>The OSDeviceCharacterBuffered class implements circular receive/transmit buffers. It is the parent class for devices like USART.</p>

<p>OSDeviceCharacterBuffered is an abstract class, requiring children classes to implement the actual read/write code.</p>

<h1 id="constructors">Constructors</h1>

<h2 id="osdevicecharacterbufferedunsigned-char-prxbuf-unsigned-short-rxbufsize-unsigned-short-rxhwm-unsigned-short-rxlwm-unsigned-char-ptxbuf-unsigned-short-txbufsize-unsigned-short-txhwm-unsigned-short-txlwm">OSDeviceCharacterBuffered(unsigned char *pRxBuf, unsigned short rxBufSize, unsigned short rxHWM, unsigned short rxLWM, unsigned char *pTxBuf, unsigned short txBufSize, unsigned short txHWM, unsigned short txLWM)</h2>

<p>
<strong>Description</strong>
</p>

<p>Initialize the buffered character device with the given circular buffers and with custom water mark values.</p>

<p>
<strong>Parameters</strong>
</p>

<p>:* pRxBuf - pointer to receive buffer</p>

<p>:* rxBufSize - size of receive buffer</p>

<p>:* rxHWM - receive high water mark</p>

<p>:* rxLWM - receive low water mark</p>

<p>:* tRxBuf - pointer to transmit buffer</p>

<p>:* txBufSize - size of transmit buffer</p>

<p>:* txHWM - transmit high water mark</p>

<p>:* txLWM - transmit low water mark</p>

<p>
<strong>Return value</strong>
</p>

<p>:* none</p>

<h2 id="osdevicecharacterbufferedunsigned-char-prxbuf-unsigned-short-rxbufsize-unsigned-char-ptxbuf-unsigned-short-txbufsize">OSDeviceCharacterBuffered(unsigned char *pRxBuf, unsigned short rxBufSize, unsigned char *pTxBuf, unsigned short txBufSize)</h2>

<p>
<strong>Description</strong>
</p>

<p>Initialize the buffered character device with the given circular buffers and default 1/4 low and 3/4 high water mark values.</p>

<p>
<strong>Parameters</strong>
</p>

<p>:* pRxBuf - pointer to receive buffer</p>

<p>:* rxBufSize - size of receive buffer</p>

<p>:* tRxBuf - pointer to transmit buffer</p>

<p>:* txBufSize - size of transmit buffer</p>

<p>
<strong>Return value</strong>
</p>

<p>:* none</p>

<h1 id="virtual-methods">Virtual Methods</h1>

<h2 id="virtual-osreturn_t-implopenvoid">virtual OSReturn_t implOpen(void)</h2>

<p>
<strong>Description</strong>
</p>

<p>Call implPortInit() to open the device.</p>

<p>
<strong>Parameters</strong>
</p>

<p>:* none</p>

<p>
<strong>Return value</strong>
</p>

<p>:* status</p>

<h2 id="virtual-osreturn_t-implclosevoid">virtual OSReturn_t implClose(void)</h2>

<p>
<strong>Description</strong>
</p>

<p>Call implPortDisable() to close the device.</p>

<p>
<strong>Parameters</strong>
</p>

<p>:* none</p>

<p>
<strong>Return value</strong>
</p>

<p>:* status</p>

<h2 id="virtual-bool-implisconnectedvoid-const">virtual bool implIsConnected(void) const</h2>

<p>
<strong>Description</strong>
</p>

<p>Check if the device is connected. Not yet fully implemented, currently just returns returns true.</p>

<p>
<strong>Parameters</strong>
</p>

<p>:* none</p>

<p>
<strong>Return value</strong>
</p>

<p>:* true if the device is connected</p>

<h2 id="virtual-bool-implcanreadvoid">virtual bool implCanRead(void)</h2>

<p>
<strong>Description</strong>
</p>

<p>Check if the receive buffer is not empty.</p>

<p>
<strong>Parameters</strong>
</p>

<p>:* none</p>

<p>
<strong>Return value</strong>
</p>

<p>:* true if characters are available for read</p>

<h2 id="virtual-int-implavailablereadvoid">virtual int implAvailableRead(void)</h2>

<p>
<strong>Description</strong>
</p>

<p>Return the number of available characters in the receive buffer.</p>

<p>
<strong>Parameters</strong>
</p>

<p>:* none</p>

<p>
<strong>Return value</strong>
</p>

<p>:* number of available characters</p>

<h2 id="virtual-int-implreadbytevoid">virtual int implReadByte(void)</h2>

<p>
<strong>Description</strong>
</p>

<p>Return the next byte available in the receive buffer.</p>

<p>
<strong>Parameters</strong>
</p>

<p>:* none</p>

<p>
<strong>Return value</strong>
</p>

<p>:* return byte or negative if an error occur</p>

<h2 id="virtual-bool-implcanwritevoid">virtual bool implCanWrite(void)</h2>

<p>
<strong>Description</strong>
</p>

<p>Check if the transmit buffer is not full.</p>

<p>
<strong>Parameters</strong>
</p>

<p>:* none</p>

<p>
<strong>Return value</strong>
</p>

<p>:* true if transmit queue not full</p>

<h2 id="virtual-int-implwritebyteunsigned-char-b">virtual int implWriteByte(unsigned char b)</h2>

<p>
<strong>Description</strong>
</p>

<p>Add one byte to the transmit buffer. If above high water mark, start transmission by enabling transmit interrupts.</p>

<p>
<strong>Parameters</strong>
</p>

<p>:* none</p>

<p>
<strong>Return value</strong>
</p>

<p>:* status</p>

<h2 id="virtual-int-implflushvoid">virtual int implFlush(void)</h2>

<p>
<strong>Description</strong>
</p>

<p>If the transmit buffer is above high water mark, start transmission by enabling transmit interrupts.</p>

<p>
<strong>Parameters</strong>
</p>

<p>:* none</p>

<p>
<strong>Return value</strong>
</p>

<p>:* status of the operation</p>

<h1 id="methods">Methods</h1>

<h2 id="void-interruptrxserviceroutinevoid">void interruptRxServiceRoutine(void)</h2>

<p>
<strong>Description</strong>
</p>

<p>Implement the receive interrupt service routine. Read from the device and if the receive buffer is not full, insert in it.</p>

<p>
<strong>Parameters</strong>
</p>

<p>:* none</p>

<p>
<strong>Return value</strong>
</p>

<p>:* none</p>

<h2 id="void-interrupttxserviceroutinevoid">void interruptTxServiceRoutine(void)</h2>

<p>
<strong>Description</strong>
</p>

<p>Implement the transmit interrupt service routine. If the transmit buffer is empty, disable transmit interrupts. Get one byte from the transmit buffer and write it to the device. If the buffer is below the low water mark, notify writer to send more bytes.</p>

<p>
<strong>Parameters</strong>
</p>

<p>:* none</p>

<p>
<strong>Return value</strong>
</p>

<p>:* none</p>

<h1 id="abstract-methods">Abstract Methods</h1>

<p>== virtual int implPortInit(void) = 0 ==</p>

<h2 id="virtual-int-implportdisablevoid">virtual int implPortDisable(void)</h2>

<p>== virtual void implInterruptTxEnable(void) = 0 ==</p>

<p>== virtual void implInterruptTxDisable(void) = 0 ==</p>

<p>== virtual unsigned char implPortRead(void) = 0 ==</p>

<p>== virtual void implPortWrite(unsigned char b) = 0 ==</p>








<ul class="share-buttons">
  <li><div class="tw-share-button"><a href="https://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a></div></li>
  <li><div class="fb-share-button" data-href="http://micro-os-plus.github.io/micro-os-plus/i/Class_OSDeviceCharacterBuffered/" data-layout="button"></div></li>
</ul>



      </div>

    </div>
  </div>

</div>

<div class="container">

  <div class="site-footer">
  <div class="site-footer-links left">
    <ul>
  <li>© 2019 Liviu Ionescu</li>
  <li>Hosted on GitHub</li>
  <li><a href="/feed.xml"><img src="/assets/images/feed-20.png" alt="RSS"></a></li>
  <li>
<a href="http://twitter.com/micro_os_plus" class="twitter-follow-button" data-show-count="false">Follow @micro_os_plus</a><script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
</li>
</ul>


  </div>
  <a href="https://github.com/micro-os-plus/micro-os-plus-iii" aria-label="Homepage">
      <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
  </a>
  <div class="site-footer-links right">
    <ul>
  <li><a href="/">Home</a></li>
  <li><a href="/blog/">News</a></li>
  <li><a href="https://github.com/micro-os-plus/micro-os-plus-iii/releases">Releases</a></li>
  <li><a href="https://github.com/micro-os-plus/micro-os-plus-iii/issues">Support</a></li>
  <li><a href="/about/">About</a></li>
</ul>

  </div>
</div>


</div>

</body>
</html>
